[{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\postcss.config.cjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\animations\\PageTransition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\animations\\ScrollReveal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\animations\\TiltCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\AdminLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\PageHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\layout\\ScrollToTop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\ui\\ImageUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\components\\ui\\WeeklyCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":88,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":88,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { type Session, type User } from '@supabase/supabase-js';\r\nimport { supabase } from '../utils/supabase';\r\n\r\ninterface AuthContextType {\r\n    session: Session | null;\r\n    user: User | null;\r\n    role: string | null;\r\n    isAdmin: boolean;\r\n    loading: boolean;\r\n    signOut: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [session, setSession] = useState<Session | null>(null);\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [role, setRole] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // Get initial session\r\n        supabase.auth.getSession().then(({ data: { session } }) => {\r\n            setSession(session);\r\n            setUser(session?.user ?? null);\r\n            if (session?.user) {\r\n                fetchUserRole(session.user.id);\r\n            } else {\r\n                setLoading(false);\r\n            }\r\n        });\r\n\r\n        // Listen for auth changes\r\n        const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {\r\n            setSession(session);\r\n            setUser(session?.user ?? null);\r\n            if (session?.user) {\r\n                fetchUserRole(session.user.id);\r\n            } else {\r\n                setRole(null);\r\n                setLoading(false);\r\n            }\r\n        });\r\n\r\n        return () => subscription.unsubscribe();\r\n    }, []);\r\n\r\n    const fetchUserRole = async (userId: string) => {\r\n        try {\r\n            // First try to check metadata if it exists (faster?) - No, source of truth is DB.\r\n            // Check 'perfis' table\r\n            const { data, error } = await supabase\r\n                .from('perfis')\r\n                .select('role')\r\n                .eq('id', userId)\r\n                .single();\r\n\r\n            if (error) {\r\n                console.error('Error fetching user role:', error);\r\n            } else if (data) {\r\n                console.log('Role fetched:', data.role);\r\n                setRole(data.role);\r\n            } else {\r\n                console.log('No role data found for user');\r\n            }\r\n        } catch (error) {\r\n            console.error('Unexpected error fetching role:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const signOut = async () => {\r\n        await supabase.auth.signOut();\r\n        setRole(null);\r\n    };\r\n\r\n    const isAdmin = role === 'admin';\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ session, user, role, isAdmin, loading, signOut }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\contexts\\CartContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":90,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":90,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nexport interface Product {\r\n    id: string;\r\n    nome: string;\r\n    preco: number;\r\n    imagem_url: string;\r\n    categoria: string;\r\n    stock: number;\r\n}\r\n\r\nexport interface CartItem extends Product {\r\n    quantity: number;\r\n}\r\n\r\ninterface CartContextType {\r\n    items: CartItem[];\r\n    addToCart: (product: Product) => void;\r\n    removeFromCart: (productId: string) => void;\r\n    updateQuantity: (productId: string, quantity: number) => void;\r\n    clearCart: () => void;\r\n    total: number;\r\n    itemCount: number;\r\n}\r\n\r\nconst CartContext = createContext<CartContextType | undefined>(undefined);\r\n\r\nexport const CartProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [items, setItems] = useState<CartItem[]>(() => {\r\n        const savedCart = localStorage.getItem('cart');\r\n        return savedCart ? JSON.parse(savedCart) : [];\r\n    });\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('cart', JSON.stringify(items));\r\n    }, [items]);\r\n\r\n    const addToCart = (product: Product) => {\r\n        setItems(prev => {\r\n            const existing = prev.find(item => item.id === product.id);\r\n            if (existing) {\r\n                if (existing.quantity >= product.stock) {\r\n                    alert('Quantidade máxima em stock atingida!');\r\n                    return prev;\r\n                }\r\n                return prev.map(item =>\r\n                    item.id === product.id\r\n                        ? { ...item, quantity: item.quantity + 1 }\r\n                        : item\r\n                );\r\n            }\r\n            if (product.stock < 1) {\r\n                alert('Produto fora de stock!');\r\n                return prev;\r\n            }\r\n            return [...prev, { ...product, quantity: 1 }];\r\n        });\r\n    };\r\n\r\n    const removeFromCart = (productId: string) => {\r\n        setItems(prev => prev.filter(item => item.id !== productId));\r\n    };\r\n\r\n    const updateQuantity = (productId: string, quantity: number) => {\r\n        if (quantity < 1) return;\r\n        setItems(prev => {\r\n            const item = prev.find(i => i.id === productId);\r\n            if (item && quantity > item.stock) {\r\n                alert('Quantidade indisponível em stock!');\r\n                return prev;\r\n            }\r\n            return prev.map(item =>\r\n                item.id === productId ? { ...item, quantity } : item\r\n            )\r\n        });\r\n    };\r\n\r\n    const clearCart = () => setItems([]);\r\n\r\n    const total = items.reduce((sum, item) => sum + (item.preco * item.quantity), 0);\r\n    const itemCount = items.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n    return (\r\n        <CartContext.Provider value={{ items, addToCart, removeFromCart, updateQuantity, clearCart, total, itemCount }}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useCart = () => {\r\n    const context = useContext(CartContext);\r\n    if (context === undefined) {\r\n        throw new Error('useCart must be used within a CartProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\About.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Booking.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[846,849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[846,849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[904,907],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[904,907],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1035,1038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1035,1038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1114,1117],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1114,1117],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2667,2670],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2667,2670],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Calendar, Check, User, Scissors, Clock, Sun, Sparkles, Loader } from 'lucide-react';\r\nimport { getRealAvailableSlots, type TimeSlot } from '../utils/realBookingService';\r\nimport { supabase } from '../utils/supabase';\r\nimport { clsx } from 'clsx';\r\n\r\nimport PageHeader from '../components/layout/PageHeader';\r\n\r\nimport { format } from 'date-fns';\r\nimport { pt } from 'date-fns/locale';\r\nimport WeeklyCalendar from '../components/ui/WeeklyCalendar';\r\n\r\nconst Booking: React.FC = () => {\r\n    const { user } = useAuth();\r\n    const [step, setStep] = useState(1);\r\n\r\n    // Data state\r\n    const [barbers, setBarbers] = useState<any[]>([]);\r\n    const [services, setServices] = useState<any[]>([]);\r\n    const [loadingData, setLoadingData] = useState(true);\r\n\r\n    const [selectedBarber, setSelectedBarber] = useState<any | null>(null);\r\n    const [selectedService, setSelectedService] = useState<any | null>(null);\r\n    const [selectedDate, setSelectedDate] = useState('');\r\n    const [selectedTime, setSelectedTime] = useState('');\r\n    const [availableSlots, setAvailableSlots] = useState<TimeSlot[]>([]);\r\n\r\n    // For 'Any Barber' feature: keeps track of which barber was actually assigned to the chosen slot\r\n    const [selectedSlotBarberId, setSelectedSlotBarberId] = useState<string | null>(null);\r\n\r\n    const location = useLocation();\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [barbersRes, servicesRes] = await Promise.all([\r\n                    supabase.from('barbeiros').select('*').eq('disponivel', true),\r\n                    supabase.from('servicos').select('*')\r\n                ]);\r\n\r\n                if (barbersRes.error) throw barbersRes.error;\r\n                if (servicesRes.error) throw servicesRes.error;\r\n\r\n                // Add 'Any Barber' option\r\n                const anyBarber = {\r\n                    id: 'any',\r\n                    nome: 'Qualquer Profissional',\r\n                    foto_url: '',\r\n                    disponivel: true\r\n                };\r\n\r\n                const sortedBarbers = (barbersRes.data || []).sort((a, b) => a.nome.localeCompare(b.nome));\r\n                setBarbers([anyBarber, ...sortedBarbers]);\r\n\r\n                setServices(servicesRes.data || []);\r\n\r\n                // Handle pre-filled state after data load\r\n                const state = (location as any).state as { serviceName?: string; barberName?: string } | null;\r\n                if (state) {\r\n                    let nextStep = 1;\r\n                    if (state.barberName) {\r\n                        const preSelectedBarber = sortedBarbers.find(b => b.nome === state.barberName);\r\n                        if (preSelectedBarber) {\r\n                            setSelectedBarber(preSelectedBarber);\r\n                            nextStep = 2;\r\n                        }\r\n                    }\r\n                    if (state.serviceName) {\r\n                        const preSelectedService = servicesRes.data?.find(s => s.nome === state.serviceName);\r\n                        if (preSelectedService) {\r\n                            setSelectedService(preSelectedService);\r\n                            if (state.barberName) nextStep = 3;\r\n                        }\r\n                    }\r\n                    setStep(nextStep);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            } finally {\r\n                setLoadingData(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, [location]);\r\n\r\n    if (loadingData) {\r\n        return (\r\n            <div className=\"min-h-screen bg-dark-bg flex items-center justify-center\">\r\n                <Loader className=\"w-10 h-10 text-primary animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleDateSelect = async (date: Date) => {\r\n        const formattedDate = format(date, 'yyyy-MM-dd');\r\n        setSelectedDate(formattedDate);\r\n        setSelectedTime('');\r\n        setSelectedSlotBarberId(null);\r\n\r\n        // Fetch real slots\r\n        if (selectedService && selectedBarber) {\r\n            const slots = await getRealAvailableSlots(\r\n                formattedDate,\r\n                selectedService.duracao,\r\n                selectedBarber.id\r\n            );\r\n            setAvailableSlots(slots);\r\n        }\r\n    };\r\n\r\n    const handleTimeSelect = (time: string, candidateBarberId?: string) => {\r\n        setSelectedTime(time);\r\n\r\n        // If \"Any\" was selected, we MUST use the candidate identified by the service\r\n        // If specific barber, we use selectedBarber.id\r\n        // If specific barber but candidateBarberId is somehow passed (should be same), use it.\r\n        if (selectedBarber?.id === 'any' && candidateBarberId) {\r\n            setSelectedSlotBarberId(candidateBarberId);\r\n        } else {\r\n            setSelectedSlotBarberId(selectedBarber?.id);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        const finalBarberId = selectedBarber?.id === 'any' ? selectedSlotBarberId : selectedBarber?.id;\r\n\r\n        if (!user || !finalBarberId || !selectedService || !selectedDate || !selectedTime) {\r\n            alert('Por favor, preencha todos os campos.');\r\n            return;\r\n        }\r\n\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            const dateTimeString = `${selectedDate}T${selectedTime}:00`;\r\n            const dateObj = new Date(dateTimeString);\r\n\r\n            const appointmentData = {\r\n                cliente_id: user.id,\r\n                barbeiro_id: finalBarberId,\r\n                servico_id: selectedService.id,\r\n                data_hora: dateObj.toISOString(),\r\n                status: 'pendente'\r\n            };\r\n\r\n            const { error } = await supabase\r\n                .from('agendamentos')\r\n                .insert([appointmentData]);\r\n\r\n            if (error) throw error;\r\n\r\n            setStep(5);\r\n        } catch (error) {\r\n            console.error('Erro ao agendar:', error);\r\n            alert('Ocorreu um erro ao realizar o agendamento. Por favor, tente novamente.');\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    const nextStep = () => setStep(step + 1);\r\n    const prevStep = () => setStep(step - 1);\r\n\r\n    const variants = {\r\n        enter: { opacity: 0, x: 20 },\r\n        center: { opacity: 1, x: 0 },\r\n        exit: { opacity: 0, x: -20 }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg text-white\">\r\n            <PageHeader\r\n                title={<>AGENDAR <span className=\"text-primary\">HORÁRIO</span></>}\r\n                subtitle=\"Escolha o serviço, data e hora que melhor se adequam a você.\"\r\n                backgroundImage=\"https://images.unsplash.com/photo-1503951914875-452162b7f30a?auto=format&fit=crop&q=80&w=2070\"\r\n            />\r\n\r\n            <div className=\"pt-12 px-4 pb-12\">\r\n                <div className=\"max-w-3xl mx-auto\">\r\n                    <div className=\"mb-12\">\r\n                        {/* Visual Progress Stepper */}\r\n                        <div className=\"relative flex justify-between items-center max-w-2xl mx-auto\">\r\n                            {/* Connecting Line */}\r\n                            <div className=\"absolute top-1/2 left-0 w-full h-1 bg-gray-800 -z-10 -translate-y-1/2 rounded-full\">\r\n                                <div\r\n                                    className=\"h-full bg-primary transition-all duration-500 rounded-full\"\r\n                                    style={{ width: `${((step - 1) / 4) * 100}%` }}\r\n                                />\r\n                            </div>\r\n\r\n                            {[\r\n                                { num: 1, icon: User, label: 'Profissional' },\r\n                                { num: 2, icon: Scissors, label: 'Serviço' },\r\n                                { num: 3, icon: Calendar, label: 'Data' },\r\n                                { num: 4, icon: Check, label: 'Confirmar' },\r\n                                { num: 5, icon: Sparkles, label: 'Concluir' }\r\n                            ].map((s) => (\r\n                                <div key={s.num} className=\"flex flex-col items-center group\">\r\n                                    <div className={clsx(\r\n                                        \"w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center border-4 transition-all duration-300 z-10\",\r\n                                        step >= s.num\r\n                                            ? \"bg-primary border-primary text-black shadow-[0_0_15px_rgba(212,175,55,0.4)]\"\r\n                                            : \"bg-dark-bg border-gray-700 text-gray-500\"\r\n                                    )}>\r\n                                        <s.icon className=\"w-5 h-5 md:w-6 md:h-6\" />\r\n                                    </div>\r\n                                    <span className={clsx(\r\n                                        \"mt-3 text-xs md:text-sm font-bold tracking-wide transition-colors duration-300\",\r\n                                        step >= s.num ? \"text-primary\" : \"text-gray-600\"\r\n                                    )}>\r\n                                        {s.label}\r\n                                    </span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-dark/50 backdrop-blur-sm p-6 md:p-8 rounded-2xl border border-white/5 shadow-2xl min-h-[400px]\">\r\n                        <AnimatePresence mode=\"wait\">\r\n                            {step === 1 && (\r\n                                <motion.div\r\n                                    key=\"step1\"\r\n                                    variants={variants}\r\n                                    initial=\"enter\"\r\n                                    animate=\"center\"\r\n                                    exit=\"exit\"\r\n                                    transition={{ duration: 0.3 }}\r\n                                >\r\n                                    <h2 className=\"text-xl font-bold mb-6 flex items-center\"><User className=\"mr-2 text-primary\" /> Escolha o Profissional</h2>\r\n                                    <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\">\r\n                                        {barbers.map((barber) => (\r\n                                            <button\r\n                                                key={barber.id}\r\n                                                onClick={() => setSelectedBarber(barber)}\r\n                                                className={clsx(\r\n                                                    \"relative overflow-hidden group rounded-2xl border transition-all duration-300 aspect-[3/4]\",\r\n                                                    selectedBarber?.id === barber.id\r\n                                                        ? \"border-primary shadow-[0_0_20px_rgba(212,175,55,0.2)]\"\r\n                                                        : \"border-gray-800 hover:border-gray-600\"\r\n                                                )}\r\n                                            >\r\n                                                <div className={clsx(\r\n                                                    \"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent z-10 transition-opacity duration-300\",\r\n                                                    selectedBarber?.id === barber.id ? \"opacity-80\" : \"opacity-60 group-hover:opacity-40\"\r\n                                                )} />\r\n                                                <img\r\n                                                    src={barber.id === 'any' ? 'https://ui-avatars.com/api/?name=Qualquer+Pro&background=d4af37&color=000' : (barber.foto_url || 'https://ui-avatars.com/api/?name=Barber&background=random')}\r\n                                                    alt={barber.nome}\r\n                                                    className=\"absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\"\r\n                                                />\r\n                                                <div className=\"absolute bottom-0 left-0 right-0 p-4 z-20 text-left\">\r\n                                                    <h3 className={clsx(\r\n                                                        \"font-bold text-lg transition-colors duration-300\",\r\n                                                        selectedBarber?.id === barber.id ? \"text-primary\" : \"text-white\"\r\n                                                    )}>{barber.nome}</h3>\r\n                                                </div>\r\n                                                {selectedBarber?.id === barber.id && (\r\n                                                    <div className=\"absolute top-4 right-4 z-20 bg-primary text-black p-1 rounded-full\">\r\n                                                        <Check className=\"w-4 h-4\" />\r\n                                                    </div>\r\n                                                )}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                    <div className=\"mt-8 flex justify-end\">\r\n                                        <button\r\n                                            onClick={nextStep}\r\n                                            disabled={!selectedBarber}\r\n                                            className=\"btn-primary disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        >\r\n                                            Próximo\r\n                                        </button>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {step === 2 && (\r\n                                <motion.div\r\n                                    key=\"step2\"\r\n                                    variants={variants}\r\n                                    initial=\"enter\"\r\n                                    animate=\"center\"\r\n                                    exit=\"exit\"\r\n                                    transition={{ duration: 0.3 }}\r\n                                >\r\n                                    <h2 className=\"text-xl font-bold mb-6 flex items-center text-white\"><Scissors className=\"mr-2 text-primary\" /> Escolha o Serviço</h2>\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                        {services.map((service) => (\r\n                                            <button\r\n                                                key={service.id}\r\n                                                onClick={() => setSelectedService(service)}\r\n                                                className={clsx(\r\n                                                    \"group relative overflow-hidden p-6 rounded-xl border text-left transition-all duration-300 hover:-translate-y-1 hover:shadow-lg\",\r\n                                                    selectedService?.id === service.id\r\n                                                        ? \"border-primary bg-primary/10 shadow-[0_0_20px_rgba(212,175,55,0.1)]\"\r\n                                                        : \"border-gray-800 bg-card-bg hover:border-gray-600\"\r\n                                                )}\r\n                                            >\r\n                                                <div className=\"flex justify-between items-start mb-2\">\r\n                                                    <div className={clsx(\r\n                                                        \"p-3 rounded-lg transition-colors\",\r\n                                                        selectedService?.id === service.id ? \"bg-primary text-black\" : \"bg-dark-bg text-gray-400 group-hover:text-primary\"\r\n                                                    )}>\r\n                                                        <Scissors className=\"w-6 h-6\" />\r\n                                                    </div>\r\n                                                    <span className={clsx(\r\n                                                        \"text-xl font-bold transition-colors\",\r\n                                                        selectedService?.id === service.id ? \"text-primary\" : \"text-white\"\r\n                                                    )}>{service.preco}€</span>\r\n                                                </div>\r\n                                                <h3 className=\"font-bold text-lg text-white mb-1 group-hover:text-primary transition-colors\">{service.nome}</h3>\r\n                                                <div className=\"flex items-center text-sm text-gray-400\">\r\n                                                    <Clock className=\"w-4 h-4 mr-1\" />\r\n                                                    {service.duracao} min\r\n                                                </div>\r\n\r\n                                                {selectedService?.id === service.id && (\r\n                                                    <div className=\"absolute top-2 right-2 text-primary\">\r\n                                                        <Check className=\"w-5 h-5\" />\r\n                                                    </div>\r\n                                                )}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                    <div className=\"mt-8 flex justify-between\">\r\n                                        <button onClick={prevStep} className=\"text-gray-400 hover:text-white\">Voltar</button>\r\n                                        <button\r\n                                            onClick={nextStep}\r\n                                            disabled={!selectedService}\r\n                                            className=\"btn-primary disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        >\r\n                                            Próximo\r\n                                        </button>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {step === 3 && (\r\n                                <motion.div\r\n                                    key=\"step3\"\r\n                                    variants={variants}\r\n                                    initial=\"enter\"\r\n                                    animate=\"center\"\r\n                                    exit=\"exit\"\r\n                                    transition={{ duration: 0.3 }}\r\n                                >\r\n                                    <h2 className=\"text-xl font-bold mb-6 flex items-center\"><Calendar className=\"mr-2 text-primary\" /> Escolha a Data e Hora</h2>\r\n\r\n                                    <div className=\"mb-8\">\r\n                                        <WeeklyCalendar\r\n                                            selectedDate={selectedDate ? new Date(selectedDate) : null}\r\n                                            onDateSelect={handleDateSelect}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    {selectedDate && (\r\n                                        <motion.div\r\n                                            initial={{ opacity: 0, y: 10 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            className=\"space-y-6\"\r\n                                        >\r\n                                            {/* Manhã */}\r\n                                            <div>\r\n                                                <div className=\"flex items-center mb-3 text-gray-300\">\r\n                                                    <Sun className=\"w-4 h-4 mr-2 text-yellow-500\" />\r\n                                                    <span className=\"text-sm font-bold uppercase tracking-wider\">Manhã</span>\r\n                                                </div>\r\n                                                <div className=\"grid grid-cols-3 md:grid-cols-5 gap-3\">\r\n                                                    {availableSlots.filter(s => parseInt(s.time.split(':')[0]) < 12).map((slot) => (\r\n                                                        <button\r\n                                                            key={slot.time}\r\n                                                            disabled={!slot.available}\r\n                                                            onClick={() => handleTimeSelect(slot.time, slot.barberId)}\r\n                                                            className={clsx(\r\n                                                                \"py-2 px-1 rounded-lg text-sm font-medium transition-all duration-200 relative overflow-hidden\",\r\n                                                                !slot.available && \"bg-gray-800/50 text-gray-600 cursor-not-allowed border border-transparent\",\r\n                                                                slot.available && selectedTime === slot.time && \"bg-primary text-black font-bold shadow-lg shadow-primary/20 scale-105\",\r\n                                                                slot.available && selectedTime !== slot.time && \"bg-card-bg border border-gray-700 text-gray-300 hover:border-primary/50 hover:text-white\"\r\n                                                            )}\r\n                                                        >\r\n                                                            {slot.time}\r\n                                                        </button>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Tarde */}\r\n                                            <div>\r\n                                                <div className=\"flex items-center mb-3 text-gray-300\">\r\n                                                    <div className=\"relative\">\r\n                                                        <Sun className=\"w-4 h-4 mr-2 text-orange-500\" />\r\n                                                        {/* Simple representation of sunset/afternoon */}\r\n                                                    </div>\r\n                                                    <span className=\"text-sm font-bold uppercase tracking-wider\">Tarde</span>\r\n                                                </div>\r\n                                                <div className=\"grid grid-cols-3 md:grid-cols-5 gap-3\">\r\n                                                    {availableSlots.filter(s => parseInt(s.time.split(':')[0]) >= 12).map((slot) => (\r\n                                                        <button\r\n                                                            key={slot.time}\r\n                                                            disabled={!slot.available}\r\n                                                            onClick={() => handleTimeSelect(slot.time, slot.barberId)}\r\n                                                            className={clsx(\r\n                                                                \"py-2 px-1 rounded-lg text-sm font-medium transition-all duration-200 relative overflow-hidden\",\r\n                                                                !slot.available && \"bg-gray-800/50 text-gray-600 cursor-not-allowed border border-transparent\",\r\n                                                                slot.available && selectedTime === slot.time && \"bg-primary text-black font-bold shadow-lg shadow-primary/20 scale-105\",\r\n                                                                slot.available && selectedTime !== slot.time && \"bg-card-bg border border-gray-700 text-gray-300 hover:border-primary/50 hover:text-white\"\r\n                                                            )}\r\n                                                        >\r\n                                                            {slot.time}\r\n                                                        </button>\r\n                                                    ))}\r\n                                                </div>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    )}\r\n\r\n                                    <div className=\"mt-8 flex justify-between\">\r\n                                        <button onClick={prevStep} className=\"text-gray-400 hover:text-white\">Voltar</button>\r\n                                        <button\r\n                                            onClick={nextStep}\r\n                                            disabled={!selectedDate || !selectedTime}\r\n                                            className=\"btn-primary disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                        >\r\n                                            Próximo\r\n                                        </button>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {step === 4 && (\r\n                                <motion.div\r\n                                    key=\"step4\"\r\n                                    variants={variants}\r\n                                    initial=\"enter\"\r\n                                    animate=\"center\"\r\n                                    exit=\"exit\"\r\n                                    transition={{ duration: 0.3 }}\r\n                                >\r\n                                    <h2 className=\"text-xl font-bold mb-6 flex items-center\"><User className=\"mr-2 text-primary\" /> Confirmar Detalhes</h2>\r\n\r\n                                    <div className=\"text-center mb-6\">\r\n                                        <p className=\"text-gray-400\">\r\n                                            O agendamento será realizado em nome de:<br />\r\n                                            <span className=\"text-white font-bold text-lg block mt-1\">{user?.user_metadata?.nome || user?.email}</span>\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    <div className=\"relative mt-8 bg-card-bg rounded-lg border-2 border-dashed border-gray-700 p-6 overflow-hidden max-w-sm mx-auto shadow-2xl\">\r\n                                        {/* Ticket Cutouts */}\r\n                                        <div className=\"absolute top-1/2 -left-3 w-6 h-6 bg-dark rounded-full -translate-y-1/2\" />\r\n                                        <div className=\"absolute top-1/2 -right-3 w-6 h-6 bg-dark rounded-full -translate-y-1/2\" />\r\n\r\n                                        <div className=\"text-center mb-6\">\r\n                                            <h3 className=\"font-heading font-bold text-xl text-primary tracking-widest uppercase\">Barbearia Dourado</h3>\r\n                                            <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Comprovante de Pré-Agendamento</p>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-4 relative z-10\">\r\n                                            <div className=\"flex justify-between items-center border-b border-gray-800 pb-2\">\r\n                                                <span className=\"text-gray-400\">Cliente</span>\r\n                                                <span className=\"font-bold text-white\">{user?.user_metadata?.nome || 'Cliente'}</span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-between items-center border-b border-gray-800 pb-2\">\r\n                                                <span className=\"text-gray-400\">Profissional</span>\r\n                                                <span className=\"font-bold text-white\">{selectedBarber?.nome}</span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-between items-center border-b border-gray-800 pb-2\">\r\n                                                <span className=\"text-gray-400\">Serviço</span>\r\n                                                <span className=\"font-bold text-white\">{selectedService?.nome}</span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-between items-center border-b border-gray-800 pb-2\">\r\n                                                <span className=\"text-gray-400\">Data</span>\r\n                                                <span className=\"font-bold text-white capitalize\">\r\n                                                    {selectedDate && format(new Date(selectedDate), \"EEEE, d MMM\", { locale: pt })}\r\n                                                </span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-between items-center border-b border-gray-800 pb-2\">\r\n                                                <span className=\"text-gray-400\">Horário</span>\r\n                                                <span className=\"font-bold text-white\">{selectedTime}</span>\r\n                                            </div>\r\n                                            <div className=\"flex justify-between items-center pt-2\">\r\n                                                <span className=\"text-gray-400 text-sm\">Total a Pagar</span>\r\n                                                <span className=\"font-bold text-2xl text-primary\">{selectedService?.preco}€</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"mt-8 flex justify-between items-center\">\r\n                                        <button type=\"button\" onClick={prevStep} className=\"text-gray-400 hover:text-white\">Voltar</button>\r\n                                        <button\r\n                                            onClick={handleSubmit}\r\n                                            className=\"btn-primary font-bold uppercase tracking-wide px-8 py-3 shadow-[0_0_20px_rgba(212,175,55,0.3)] hover:shadow-[0_0_30px_rgba(212,175,55,0.5)] transform hover:-translate-y-1 transition-all\"\r\n                                        >\r\n                                            Confirmar Agendamento\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {isSubmitting && (\r\n                                        <div className=\"absolute inset-0 bg-dark/80 backdrop-blur-sm rounded-2xl flex items-center justify-center z-50\">\r\n                                            <div className=\"flex flex-col items-center\">\r\n                                                <Loader className=\"w-10 h-10 text-primary animate-spin mb-4\" />\r\n                                                <p className=\"text-white font-bold\">Processando agendamento...</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                </motion.div>\r\n                            )}\r\n\r\n                            {step === 5 && (\r\n                                <motion.div\r\n                                    key=\"step5\"\r\n                                    variants={variants}\r\n                                    initial=\"enter\"\r\n                                    animate=\"center\"\r\n                                    exit=\"exit\"\r\n                                    transition={{ duration: 0.3 }}\r\n                                    className=\"text-center py-12\"\r\n                                >\r\n                                    <div className=\"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-500/20 text-green-500 mb-6 border border-green-500/50 shadow-[0_0_30px_rgba(34,197,94,0.3)]\">\r\n                                        <Check className=\"w-10 h-10\" />\r\n                                    </div>\r\n                                    <h2 className=\"text-3xl font-heading font-bold text-white mb-4\">Agendamento Confirmado!</h2>\r\n                                    <p className=\"text-gray-300 mb-8 max-w-md mx-auto\">\r\n                                        Obrigado, <span className=\"text-primary font-bold\">{user?.user_metadata?.nome || 'Cliente'}</span>. Seu horário para <span className=\"text-white font-bold\">{selectedService?.nome}</span> foi reservado com sucesso.\r\n                                    </p>\r\n                                    <button onClick={() => window.location.href = '/'} className=\"btn-primary\">\r\n                                        Voltar para o Início\r\n                                    </button>\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Booking;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Cart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Contact.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Gallery.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[312,315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[312,315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Instagram, ZoomIn } from 'lucide-react';\r\nimport { supabase } from '../utils/supabase';\r\n\r\nimport PageHeader from '../components/layout/PageHeader';\r\n\r\nconst Gallery: React.FC = () => {\r\n    const [images, setImages] = React.useState<any[]>([]);\r\n    const [loading, setLoading] = React.useState(true);\r\n\r\n    React.useEffect(() => {\r\n        fetchImages();\r\n    }, []);\r\n\r\n    const fetchImages = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('galeria')\r\n                .select('*')\r\n                .eq('visible', true)\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (error) throw error;\r\n            setImages(data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching gallery:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg text-white\">\r\n            <PageHeader\r\n                title={<>NOSSA <span className=\"text-primary\">GALERIA</span></>}\r\n                subtitle=\"Confira alguns dos nossos melhores trabalhos e inspire-se.\"\r\n                backgroundImage=\"https://images.unsplash.com/photo-1599351431202-1e0f0137899a?q=80&w=1976&auto=format&fit=crop\"\r\n            />\r\n\r\n            <div className=\"max-w-7xl mx-auto px-4 py-16\">\r\n                {loading ? (\r\n                    <div className=\"flex justify-center py-20\">\r\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n                    </div>\r\n                ) : images.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\r\n                        {images.map((item) => (\r\n                            <motion.div\r\n                                key={item.id}\r\n                                className=\"relative aspect-square overflow-hidden rounded-2xl group cursor-pointer border border-white/5 shadow-lg bg-zinc-900\"\r\n                                initial={{ opacity: 0, scale: 0.9 }}\r\n                                whileInView={{ opacity: 1, scale: 1 }}\r\n                                viewport={{ once: true }}\r\n                            >\r\n                                <img\r\n                                    src={item.url}\r\n                                    alt={item.descricao || 'Galeria Barbearia Dourado'}\r\n                                    className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\r\n                                />\r\n                                <div className=\"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-4\">\r\n                                    <button className=\"p-3 bg-primary rounded-full text-dark hover:bg-white transition-colors\">\r\n                                        <ZoomIn className=\"w-6 h-6\" />\r\n                                    </button>\r\n                                    <a\r\n                                        href=\"https://instagram.com\"\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                        className=\"p-3 bg-dark rounded-full text-white hover:text-primary transition-colors\"\r\n                                    >\r\n                                        <Instagram className=\"w-6 h-6\" />\r\n                                    </a>\r\n                                </div>\r\n                                {item.descricao && (\r\n                                    <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent translate-y-full group-hover:translate-y-0 transition-transform duration-300\">\r\n                                        <p className=\"text-white text-sm font-medium truncate\">{item.descricao}</p>\r\n                                    </div>\r\n                                )}\r\n                            </motion.div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"text-center py-16\">\r\n                        <p className=\"text-gray-400 text-lg\">Nenhuma imagem disponível no momento.</p>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"text-center mt-16\">\r\n                    <a\r\n                        href=\"https://instagram.com\"\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"btn-outline inline-flex items-center px-8 py-4 text-lg\"\r\n                    >\r\n                        <Instagram className=\"mr-2 w-6 h-6\" /> Ver mais no Instagram\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Gallery;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Home.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Login.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3036,3039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3036,3039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { supabase } from '../utils/supabase';\r\nimport { Scissors, Mail, Lock, Loader, Eye, EyeOff } from 'lucide-react';\r\n\r\nconst Login: React.FC = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            // ----------------------------------------------------------------\r\n            // 1. AUTENTICAÇÃO (Email & Password)\r\n            // ----------------------------------------------------------------\r\n            const { error: authError } = await supabase.auth.signInWithPassword({\r\n                email,\r\n                password,\r\n            });\r\n\r\n            if (authError) throw authError;\r\n\r\n            // ----------------------------------------------------------------\r\n            // 2. VERIFICAÇÃO DE ROLE (Base de Dados)\r\n            // O sistema verifica o tipo de utilizador na tabela 'perfis'\r\n            // ----------------------------------------------------------------\r\n            const { data: { user } } = await supabase.auth.getUser();\r\n\r\n            if (user) {\r\n                // Consulta à tabela 'perfis' para obter a role (admin, barbeiro, cliente)\r\n                const { data: profile, error: profileError } = await supabase\r\n                    .from('perfis')\r\n                    .select('role')\r\n                    .eq('id', user.id)\r\n                    .single();\r\n\r\n                if (profileError) {\r\n                    console.error('Erro ao ler perfil:', profileError);\r\n                    setError('Erro ao carregar perfil de utilizador. Por favor, contacte o suporte.');\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                if (!profile) {\r\n                    console.error('Perfil não encontrado para o utilizador:', user.id);\r\n                    setError('Perfil de utilizador não encontrado. Por favor, contacte o suporte.');\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                console.log('Login efetuado com perfil:', profile?.role);\r\n\r\n                // 3. REDIRECIONAMENTO INTELIGENTE\r\n                if (profile?.role === 'admin') {\r\n                    navigate('/admin');\r\n                } else if (profile?.role === 'barbeiro') {\r\n                    navigate('/barbeiro');\r\n                } else {\r\n                    // Cliente padrão\r\n                    navigate('/');\r\n                }\r\n            } else {\r\n                navigate('/');\r\n            }\r\n        } catch (err: any) {\r\n            console.error('Login Error:', err);\r\n            setError(err.message || 'Erro ao efetuar login. Verifique suas credenciais.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg flex items-center justify-center px-4 pt-20 pb-12 relative overflow-hidden\">\r\n            {/* ... (background code omitted for brevity) ... */}\r\n            <div className=\"absolute inset-0 z-0\">\r\n                <div className=\"absolute inset-0 bg-black/70 z-10\" />\r\n                <img\r\n                    src=\"https://images.unsplash.com/photo-1503951914875-452162b7f30a?auto=format&fit=crop&q=80&w=2070\"\r\n                    alt=\"Background\"\r\n                    className=\"w-full h-full object-cover\"\r\n                />\r\n            </div>\r\n            <motion.div\r\n                className=\"max-w-md w-full bg-card-bg p-10 rounded-2xl border border-white/5 shadow-2xl relative z-10\"\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.5 }}\r\n            >\r\n                <div className=\"text-center mb-10\">\r\n                    <div className=\"w-16 h-16 bg-dark-bg rounded-2xl flex items-center justify-center mx-auto mb-6 border border-white/5\">\r\n                        <Scissors className=\"w-8 h-8 text-primary\" />\r\n                    </div>\r\n                    <h2 className=\"text-3xl font-heading font-bold text-white mb-2\">Bem-vindo de volta</h2>\r\n                    <p className=\"text-gray-400\">Acesse sua conta para agendar</p>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"bg-red-500/10 border border-red-500/50 text-red-500 p-4 rounded-lg mb-8 text-sm text-center\">\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleLogin} className=\"space-y-6\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-2\">Email</label>\r\n                        <div className=\"relative\">\r\n                            <Mail className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                            <input\r\n                                type=\"email\"\r\n                                required\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                className=\"w-full bg-dark-bg border border-white/10 rounded-lg p-4 pl-12 text-white focus:border-primary focus:outline-none transition-colors\"\r\n                                placeholder=\"seu@email.com\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-2\">Senha</label>\r\n                        <div className=\"relative\">\r\n                            <Lock className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                            <input\r\n                                type={showPassword ? \"text\" : \"password\"}\r\n                                required\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                className=\"w-full bg-dark-bg border border-white/10 rounded-lg p-4 pl-12 pr-12 text-white focus:border-primary focus:outline-none transition-colors\"\r\n                                placeholder=\"••••••••\"\r\n                            />\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setShowPassword(!showPassword)}\r\n                                className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors\"\r\n                            >\r\n                                {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full btn-primary py-4 font-bold uppercase tracking-wide flex items-center justify-center disabled:opacity-70 disabled:cursor-not-allowed rounded-lg shadow-lg shadow-primary/20\"\r\n                    >\r\n                        {loading ? <Loader className=\"animate-spin w-5 h-5\" /> : 'Entrar'}\r\n                    </button>\r\n                </form>\r\n\r\n                <div className=\"mt-8 text-center text-sm text-gray-400\">\r\n                    Não tem uma conta?{' '}\r\n                    <Link to=\"/registo\" className=\"text-primary hover:text-secondary font-semibold transition-colors\">\r\n                        Registar-se\r\n                    </Link>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Profile.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2503,2506],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2503,2506],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { supabase } from '../utils/supabase';\r\nimport {\r\n    User, Clock, LogOut, Loader, X, Repeat,\r\n    Edit2, Save, Shield, Scissors, History, Mail, Phone, Lock\r\n} from 'lucide-react';\r\nimport PageHeader from '../components/layout/PageHeader';\r\nimport { clsx } from 'clsx';\r\n\r\ninterface Appointment {\r\n    id: string;\r\n    data_hora: string;\r\n    status: string;\r\n    servicos: {\r\n        nome: string;\r\n        preco: number;\r\n        duracao: number;\r\n    };\r\n    barbeiros: {\r\n        nome: string;\r\n    };\r\n}\r\n\r\nconst Profile: React.FC = () => {\r\n    const { user, role, signOut } = useAuth();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [activeTab, setActiveTab] = useState<'upcoming' | 'history' | 'settings'>('upcoming');\r\n\r\n    // Profile Form State\r\n    const [profileData, setProfileData] = useState({\r\n        nome: '',\r\n        telemovel: ''\r\n    });\r\n\r\n    // Password State\r\n    const [passwords, setPasswords] = useState({\r\n        new: '',\r\n        confirm: ''\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (location.state?.editMode) {\r\n            setActiveTab('settings');\r\n            window.history.replaceState({}, document.title);\r\n        }\r\n    }, [location]);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setProfileData({\r\n                nome: user.user_metadata?.nome || '',\r\n                telemovel: user.user_metadata?.telemovel || ''\r\n            });\r\n        }\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        const fetchAppointments = async () => {\r\n            if (!user) return;\r\n\r\n            try {\r\n                const { data, error } = await supabase\r\n                    .from('agendamentos')\r\n                    .select(`\r\n                        id,\r\n                        data_hora,\r\n                        status,\r\n                        servicos (nome, preco, duracao),\r\n                        barbeiros (nome)\r\n                    `)\r\n                    .eq('cliente_id', user.id)\r\n                    .order('data_hora', { ascending: false });\r\n\r\n                if (error) throw error;\r\n\r\n                const formattedData = (data as any[]).map(item => ({\r\n                    ...item,\r\n                    servicos: Array.isArray(item.servicos) ? item.servicos[0] : item.servicos,\r\n                    barbeiros: Array.isArray(item.barbeiros) ? item.barbeiros[0] : item.barbeiros\r\n                }));\r\n\r\n                setAppointments(formattedData);\r\n            } catch (error) {\r\n                console.error('Erro ao buscar agendamentos:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchAppointments();\r\n    }, [user]);\r\n\r\n    const handleProfileUpdate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            const { error } = await supabase\r\n                .from('perfis')\r\n                .update({\r\n                    nome: profileData.nome,\r\n                    telemovel: profileData.telemovel\r\n                })\r\n                .eq('id', user?.id);\r\n\r\n            if (error) throw error;\r\n\r\n            await supabase.auth.updateUser({\r\n                data: {\r\n                    nome: profileData.nome,\r\n                    telemovel: profileData.telemovel\r\n                }\r\n            });\r\n\r\n            alert('Perfil atualizado com sucesso!');\r\n            window.location.reload();\r\n        } catch (error) {\r\n            console.error('Erro ao atualizar perfil:', error);\r\n            alert('Erro ao atualizar perfil.');\r\n        }\r\n    };\r\n\r\n    const handlePasswordUpdate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (passwords.new !== passwords.confirm) {\r\n            alert('As palavras-passe não coincidem.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const { error } = await supabase.auth.updateUser({\r\n                password: passwords.new\r\n            });\r\n\r\n            if (error) throw error;\r\n\r\n            alert('Palavra-passe alterada com sucesso!');\r\n            setPasswords({ new: '', confirm: '' });\r\n        } catch (error) {\r\n            console.error('Erro ao alterar senha:', error);\r\n            alert('Erro ao alterar senha. Tente novamente.');\r\n        }\r\n    };\r\n\r\n    const handleCancel = async (id: string) => {\r\n        if (!confirm('Tem certeza que deseja cancelar este agendamento?')) return;\r\n        try {\r\n            const { error } = await supabase.from('agendamentos').update({ status: 'cancelado' }).eq('id', id);\r\n            if (error) throw error;\r\n            setAppointments(prev => prev.map(apt => apt.id === id ? { ...apt, status: 'cancelado' } : apt));\r\n        } catch (error) {\r\n            console.error('Erro ao cancelar:', error);\r\n            alert('Erro ao cancelar agendamento.');\r\n        }\r\n    };\r\n\r\n    const handleReschedule = (apt: Appointment) => {\r\n        navigate('/agendar', {\r\n            state: { serviceName: apt.servicos.nome, barberName: apt.barbeiros.nome }\r\n        });\r\n    };\r\n\r\n    const formatDate = (dateString: string) => {\r\n        return new Date(dateString).toLocaleDateString('pt-PT', { day: '2-digit', month: 'long', year: 'numeric' });\r\n    };\r\n\r\n    const formatTime = (dateString: string) => {\r\n        return new Date(dateString).toLocaleTimeString('pt-PT', { hour: '2-digit', minute: '2-digit' });\r\n    };\r\n\r\n    const isUpcoming = (dateString: string) => new Date(dateString) > new Date();\r\n\r\n    const upcomingAppointments = appointments.filter(apt => isUpcoming(apt.data_hora) && apt.status !== 'cancelado');\r\n    const pastAppointments = appointments.filter(apt => !isUpcoming(apt.data_hora) || apt.status === 'cancelado');\r\n\r\n    const displayAppointments = activeTab === 'upcoming' ? upcomingAppointments : pastAppointments;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg text-gray-100\">\r\n            <PageHeader\r\n                title={<>MEU <span className=\"text-primary\">DASHBOARD</span></>}\r\n                subtitle=\"Gerencie seu perfil e seus agendamentos exclusivos.\"\r\n                backgroundImage=\"https://images.unsplash.com/photo-1621605815971-fbc98d665033?q=80&w=2070&auto=format&fit=crop\"\r\n            />\r\n\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n\r\n                    {/* LEFT COLUMN: User Profile Card */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, x: -20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        className=\"lg:col-span-1\"\r\n                    >\r\n                        <div className=\"bg-dark/50 backdrop-blur-md border border-white/5 rounded-2xl p-6 sticky top-24 shadow-xl\">\r\n                            <div className=\"flex flex-col items-center text-center mb-6\">\r\n                                <div className=\"relative w-32 h-32 mb-4\">\r\n                                    <div className=\"absolute inset-0 bg-gradient-to-br from-primary to-yellow-600 rounded-full blur opacity-20\"></div>\r\n                                    <div className=\"relative w-full h-full bg-gray-800 rounded-full border-2 border-primary/50 flex items-center justify-center overflow-hidden\">\r\n                                        <User className=\"w-16 h-16 text-gray-400\" />\r\n                                    </div>\r\n                                    <div className=\"absolute bottom-1 right-1 bg-dark border border-gray-700 rounded-full p-1.5\" title=\"Seu Cargo\">\r\n                                        <Shield className=\"w-4 h-4 text-primary\" />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <h2 className=\"text-2xl font-heading font-bold text-white mb-1\">{user?.user_metadata?.nome || 'Cliente'}</h2>\r\n                                <p className=\"text-sm text-gray-400 mb-4\">{role?.toUpperCase() || 'MEMBRO'}</p>\r\n\r\n                                <button\r\n                                    onClick={() => setActiveTab('settings')}\r\n                                    className={clsx(\r\n                                        \"w-full flex items-center justify-center gap-2 py-2 text-sm rounded-lg transition-all\",\r\n                                        activeTab === 'settings'\r\n                                            ? \"bg-primary text-dark font-bold shadow-lg shadow-primary/20\"\r\n                                            : \"btn-outline\"\r\n                                    )}\r\n                                >\r\n                                    <Edit2 className=\"w-4 h-4\" /> Editar Perfil\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-4 border-t border-white/5 pt-6\">\r\n                                <div className=\"flex items-center gap-3 text-sm text-gray-300\">\r\n                                    <div className=\"w-8 h-8 rounded-lg bg-gray-800/50 flex items-center justify-center text-primary\">\r\n                                        <Mail className=\"w-4 h-4\" />\r\n                                    </div>\r\n                                    <div className=\"flex-1 truncate\">\r\n                                        <p className=\"text-xs text-gray-500\">Email</p>\r\n                                        <p className=\"truncate\" title={user?.email}>{user?.email}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 text-sm text-gray-300\">\r\n                                    <div className=\"w-8 h-8 rounded-lg bg-gray-800/50 flex items-center justify-center text-primary\">\r\n                                        <Phone className=\"w-4 h-4\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-xs text-gray-500\">Telemóvel</p>\r\n                                        <p>{user?.user_metadata?.telemovel || 'Não definido'}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={signOut}\r\n                                className=\"w-full mt-8 flex items-center justify-center gap-2 text-red-500 hover:text-red-400 hover:bg-red-500/10 py-3 rounded-lg transition-colors border border-transparent hover:border-red-500/20\"\r\n                            >\r\n                                <LogOut className=\"w-4 h-4\" /> Sair da Conta\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n\r\n                    {/* RIGHT COLUMN: Appointments Dashboard */}\r\n                    <div className=\"lg:col-span-2\">\r\n                        {/* Tabs */}\r\n                        <div className=\"flex items-center gap-6 mb-8 border-b border-white/5 overflow-x-auto\">\r\n                            <button\r\n                                onClick={() => setActiveTab('upcoming')}\r\n                                className={clsx(\r\n                                    \"pb-4 text-sm font-bold uppercase tracking-wider relative transition-colors whitespace-nowrap\",\r\n                                    activeTab === 'upcoming' ? \"text-primary\" : \"text-gray-500 hover:text-gray-300\"\r\n                                )}\r\n                            >\r\n                                Próximos\r\n                                {activeTab === 'upcoming' && (\r\n                                    <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-primary\" />\r\n                                )}\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setActiveTab('history')}\r\n                                className={clsx(\r\n                                    \"pb-4 text-sm font-bold uppercase tracking-wider relative transition-colors whitespace-nowrap\",\r\n                                    activeTab === 'history' ? \"text-primary\" : \"text-gray-500 hover:text-gray-300\"\r\n                                )}\r\n                            >\r\n                                Histórico\r\n                                {activeTab === 'history' && (\r\n                                    <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-primary\" />\r\n                                )}\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setActiveTab('settings')}\r\n                                className={clsx(\r\n                                    \"pb-4 text-sm font-bold uppercase tracking-wider relative transition-colors whitespace-nowrap\",\r\n                                    activeTab === 'settings' ? \"text-primary\" : \"text-gray-500 hover:text-gray-300\"\r\n                                )}\r\n                            >\r\n                                Definições\r\n                                {activeTab === 'settings' && (\r\n                                    <motion.div layoutId=\"activeTab\" className=\"absolute bottom-0 left-0 w-full h-0.5 bg-primary\" />\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n\r\n                        {loading ? (\r\n                            <div className=\"flex justify-center py-20\">\r\n                                <Loader className=\"w-10 h-10 text-primary animate-spin\" />\r\n                            </div>\r\n                        ) : activeTab === 'settings' ? (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                className=\"space-y-6\"\r\n                            >\r\n                                {/* Personal Details Card */}\r\n                                <div className=\"bg-dark/40 border border-white/5 rounded-2xl p-6 sm:p-8\">\r\n                                    <h3 className=\"text-xl font-bold text-white mb-6 flex items-center gap-2\">\r\n                                        <User className=\"w-5 h-5 text-primary\" />\r\n                                        Informações Pessoais\r\n                                    </h3>\r\n\r\n                                    <form onSubmit={handleProfileUpdate} className=\"space-y-6\">\r\n                                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                            <div className=\"space-y-2\">\r\n                                                <label className=\"text-sm text-gray-400\">Nome Completo</label>\r\n                                                <input\r\n                                                    type=\"text\"\r\n                                                    value={profileData.nome}\r\n                                                    onChange={(e) => setProfileData({ ...profileData, nome: e.target.value })}\r\n                                                    className=\"w-full bg-black/40 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all\"\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"space-y-2\">\r\n                                                <label className=\"text-sm text-gray-400\">Telemóvel</label>\r\n                                                <input\r\n                                                    type=\"tel\"\r\n                                                    value={profileData.telemovel}\r\n                                                    onChange={(e) => setProfileData({ ...profileData, telemovel: e.target.value })}\r\n                                                    className=\"w-full bg-black/40 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all\"\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"space-y-2 md:col-span-2\">\r\n                                                <label className=\"text-sm text-gray-400\">Email (Não editável)</label>\r\n                                                <div className=\"relative\">\r\n                                                    <input\r\n                                                        type=\"email\"\r\n                                                        value={user?.email || ''}\r\n                                                        disabled\r\n                                                        className=\"w-full bg-black/20 border border-gray-800 rounded-lg px-4 py-3 text-gray-500 cursor-not-allowed pl-10\"\r\n                                                    />\r\n                                                    <Lock className=\"w-4 h-4 text-gray-600 absolute left-3 top-3.5\" />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex justify-end pt-2\">\r\n                                            <button type=\"submit\" className=\"btn-primary px-6 py-2.5 flex items-center gap-2\">\r\n                                                <Save className=\"w-4 h-4\" />\r\n                                                Salvar Informações\r\n                                            </button>\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n\r\n                                {/* Security Card */}\r\n                                <div className=\"bg-dark/40 border border-white/5 rounded-2xl p-6 sm:p-8\">\r\n                                    <h3 className=\"text-xl font-bold text-white mb-6 flex items-center gap-2\">\r\n                                        <Shield className=\"w-5 h-5 text-primary\" />\r\n                                        Segurança da Conta\r\n                                    </h3>\r\n\r\n                                    <form onSubmit={handlePasswordUpdate} className=\"space-y-6\">\r\n                                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                            <div className=\"space-y-2\">\r\n                                                <label className=\"text-sm text-gray-400\">Nova Palavra-passe</label>\r\n                                                <input\r\n                                                    type=\"password\"\r\n                                                    value={passwords.new}\r\n                                                    onChange={(e) => setPasswords({ ...passwords, new: e.target.value })}\r\n                                                    placeholder=\"Mínimo 6 caracteres\"\r\n                                                    className=\"w-full bg-black/40 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all\"\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"space-y-2\">\r\n                                                <label className=\"text-sm text-gray-400\">Confirmar Palavra-passe</label>\r\n                                                <input\r\n                                                    type=\"password\"\r\n                                                    value={passwords.confirm}\r\n                                                    onChange={(e) => setPasswords({ ...passwords, confirm: e.target.value })}\r\n                                                    placeholder=\"Repita a palavra-passe\"\r\n                                                    className=\"w-full bg-black/40 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex justify-end pt-2\">\r\n                                            <button\r\n                                                type=\"submit\"\r\n                                                className=\"bg-gray-800 hover:bg-gray-700 text-white font-medium px-6 py-2.5 rounded-lg flex items-center gap-2 transition-colors border border-gray-700\"\r\n                                                disabled={!passwords.new || !passwords.confirm}\r\n                                            >\r\n                                                <Lock className=\"w-4 h-4\" />\r\n                                                Atualizar Palavra-passe\r\n                                            </button>\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                            </motion.div>\r\n                        ) : displayAppointments.length > 0 ? (\r\n                            <div className=\"space-y-4\">\r\n                                <AnimatePresence mode=\"popLayout\">\r\n                                    {displayAppointments.map((apt) => (\r\n                                        <motion.div\r\n                                            key={apt.id}\r\n                                            initial={{ opacity: 0, y: 20 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            exit={{ opacity: 0, scale: 0.95 }}\r\n                                            className=\"bg-dark/40 border border-white/5 hover:border-primary/30 rounded-xl p-5 transition-all group\"\r\n                                        >\r\n                                            <div className=\"flex flex-col md:flex-row justify-between md:items-center gap-4\">\r\n                                                <div className=\"flex items-start gap-4\">\r\n                                                    <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary mt-1\">\r\n                                                        <Scissors className=\"w-6 h-6\" />\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <h3 className=\"text-lg font-bold text-white group-hover:text-primary transition-colors\">\r\n                                                            {apt.servicos?.nome}\r\n                                                        </h3>\r\n                                                        <div className=\"flex items-center gap-4 text-sm text-gray-400 mt-1\">\r\n                                                            <div className=\"flex items-center gap-1\">\r\n                                                                <User className=\"w-3 h-3\" />\r\n                                                                {apt.barbeiros?.nome}\r\n                                                            </div>\r\n                                                            <div className=\"flex items-center gap-1\">\r\n                                                                <Clock className=\"w-3 h-3\" />\r\n                                                                {formatTime(apt.data_hora)}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div className=\"flex flex-col items-end gap-2 pl-16 md:pl-0\">\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <span className=\"text-white font-heading font-bold text-lg\">\r\n                                                            {formatDate(apt.data_hora)}\r\n                                                        </span>\r\n                                                        <span className={clsx(\r\n                                                            \"px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border\",\r\n                                                            apt.status === 'confirmado' ? \"bg-green-500/10 text-green-500 border-green-500/20\" :\r\n                                                                apt.status === 'pendente' ? \"bg-yellow-500/10 text-yellow-500 border-yellow-500/20\" :\r\n                                                                    \"bg-red-500/10 text-red-500 border-red-500/20\"\r\n                                                        )}>\r\n                                                            {apt.status}\r\n                                                        </span>\r\n                                                    </div>\r\n\r\n                                                    {activeTab === 'upcoming' && (apt.status === 'pendente' || apt.status === 'confirmado') && (\r\n                                                        <div className=\"flex items-center gap-2 mt-2 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                            <button\r\n                                                                onClick={() => handleReschedule(apt)}\r\n                                                                className=\"p-2 hover:bg-gray-700/50 rounded-lg text-gray-400 hover:text-white transition-colors\"\r\n                                                                title=\"Reagendar\"\r\n                                                            >\r\n                                                                <Repeat className=\"w-4 h-4\" />\r\n                                                            </button>\r\n                                                            <button\r\n                                                                onClick={() => handleCancel(apt.id)}\r\n                                                                className=\"p-2 hover:bg-red-500/10 rounded-lg text-red-500/70 hover:text-red-500 transition-colors\"\r\n                                                                title=\"Cancelar\"\r\n                                                            >\r\n                                                                <X className=\"w-4 h-4\" />\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    ))}\r\n                                </AnimatePresence>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"bg-dark/30 border border-white/5 rounded-2xl p-12 text-center flex flex-col items-center\">\r\n                                <div className=\"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mb-4\">\r\n                                    <History className=\"w-8 h-8 text-gray-500\" />\r\n                                </div>\r\n                                <h3 className=\"text-xl font-bold text-white mb-2\">\r\n                                    {activeTab === 'upcoming' ? \"Sem agendamentos futuros\" : \"Sem histórico recente\"}\r\n                                </h3>\r\n                                <p className=\"text-gray-400 mb-8 max-w-sm\">\r\n                                    {activeTab === 'upcoming'\r\n                                        ? \"Você não tem nenhum corte agendado para os próximos dias.\"\r\n                                        : \"Você ainda não realizou agendamentos conosco.\"}\r\n                                </p>\r\n                                <button onClick={() => navigate('/agendar')} className=\"btn-primary px-8 py-3\">\r\n                                    Agendar Agora\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Register.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2250,2253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2250,2253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { supabase } from '../utils/supabase';\r\nimport { Scissors, User, Mail, Lock, Phone, Loader, Eye, EyeOff } from 'lucide-react';\r\n\r\nconst Register: React.FC = () => {\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        email: '',\r\n        phone: '',\r\n        password: '',\r\n        confirmPassword: ''\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleRegister = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        if (formData.password !== formData.confirmPassword) {\r\n            setError('As senhas não coincidem');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            // 1. Sign up user\r\n            const { data, error: authError } = await supabase.auth.signUp({\r\n                email: formData.email,\r\n                password: formData.password,\r\n                options: {\r\n                    data: {\r\n                        nome: formData.name,\r\n                        telemovel: formData.phone\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (authError) throw authError;\r\n\r\n            // Check if email confirmation is required\r\n            if (data?.session) {\r\n                // Session exists, user is logged in\r\n                navigate('/');\r\n            } else if (data?.user) {\r\n                // User created but no session => Email confirmation required\r\n                setError('Conta criada com sucesso! Por favor, verifique o seu email para ativar a conta.');\r\n                setLoading(false);\r\n                // Optional: clear form or redirect to login after a delay\r\n            } else {\r\n                navigate('/');\r\n            }\r\n\r\n        } catch (err: any) {\r\n            console.error('Registration Error:', err);\r\n            setError(err.message || 'Erro ao criar conta');\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg flex items-center justify-center px-4 pt-20 pb-12 relative overflow-hidden\">\r\n            {/* ... (background code omitted for brevity) ... */}\r\n            <div className=\"absolute inset-0 z-0\">\r\n                <div className=\"absolute inset-0 bg-black/70 z-10\" />\r\n                <img\r\n                    src=\"https://images.unsplash.com/photo-1503951914875-452162b7f30a?auto=format&fit=crop&q=80&w=2070\"\r\n                    alt=\"Background\"\r\n                    className=\"w-full h-full object-cover\"\r\n                />\r\n            </div>\r\n            <motion.div\r\n                className=\"max-w-md w-full bg-card-bg p-10 rounded-2xl border border-white/5 shadow-2xl relative z-10\"\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.5 }}\r\n            >\r\n                <div className=\"text-center mb-10\">\r\n                    <div className=\"w-16 h-16 bg-dark-bg rounded-2xl flex items-center justify-center mx-auto mb-6 border border-white/5\">\r\n                        <Scissors className=\"w-8 h-8 text-primary\" />\r\n                    </div>\r\n                    <h2 className=\"text-3xl font-heading font-bold text-white mb-2\">Crie sua Conta</h2>\r\n                    <p className=\"text-gray-400\">Junte-se à Barbearia Dourado</p>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"bg-red-500/10 border border-red-500/50 text-red-500 p-4 rounded-lg mb-8 text-sm text-center\">\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleRegister} className=\"space-y-5\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-1\">Nome Completo</label>\r\n                        <div className=\"relative\">\r\n                            <User className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"name\"\r\n                                required\r\n                                value={formData.name}\r\n                                onChange={handleChange}\r\n                                className=\"w-full bg-dark-bg border border-white/10 rounded-lg p-3 pl-12 text-white focus:border-primary focus:outline-none transition-colors\"\r\n                                placeholder=\"Seu nome\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-1\">Telefone</label>\r\n                        <div className=\"relative\">\r\n                            <Phone className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                            <input\r\n                                type=\"tel\"\r\n                                name=\"phone\"\r\n                                required\r\n                                value={formData.phone}\r\n                                onChange={handleChange}\r\n                                className=\"w-full bg-dark-bg border border-white/10 rounded-lg p-3 pl-12 text-white focus:border-primary focus:outline-none transition-colors\"\r\n                                placeholder=\"Seu telefone\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-1\">Email</label>\r\n                        <div className=\"relative\">\r\n                            <Mail className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                            <input\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                required\r\n                                value={formData.email}\r\n                                onChange={handleChange}\r\n                                className=\"w-full bg-dark-bg border border-white/10 rounded-lg p-3 pl-12 text-white focus:border-primary focus:outline-none transition-colors\"\r\n                                placeholder=\"seu@email.com\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-1\">Senha</label>\r\n                        <div className=\"relative\">\r\n                            <Lock className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                            <input\r\n                                type={showPassword ? \"text\" : \"password\"}\r\n                                name=\"password\"\r\n                                required\r\n                                value={formData.password}\r\n                                onChange={handleChange}\r\n                                className=\"w-full bg-dark-bg border border-white/10 rounded-lg p-3 pl-12 pr-12 text-white focus:border-primary focus:outline-none transition-colors\"\r\n                                placeholder=\"••••••••\"\r\n                            />\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setShowPassword(!showPassword)}\r\n                                className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors\"\r\n                            >\r\n                                {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-gray-400 mb-1\">Confirmar Senha</label>\r\n                        <div className=\"relative\">\r\n                            <Lock className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                            <input\r\n                                type={showPassword ? \"text\" : \"password\"}\r\n                                name=\"confirmPassword\"\r\n                                required\r\n                                value={formData.confirmPassword}\r\n                                onChange={handleChange}\r\n                                className=\"w-full bg-dark-bg border border-white/10 rounded-lg p-3 pl-12 pr-12 text-white focus:border-primary focus:outline-none transition-colors\"\r\n                                placeholder=\"••••••••\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full btn-primary py-4 font-bold uppercase tracking-wide flex items-center justify-center disabled:opacity-70 disabled:cursor-not-allowed mt-6 rounded-lg shadow-lg shadow-primary/20\"\r\n                    >\r\n                        {loading ? <Loader className=\"animate-spin w-5 h-5\" /> : 'Criar Conta'}\r\n                    </button>\r\n                </form>\r\n\r\n                <div className=\"mt-8 text-center text-sm text-gray-400\">\r\n                    Já tem uma conta?{' '}\r\n                    <Link to=\"/login\" className=\"text-primary hover:text-secondary font-semibold transition-colors\">\r\n                        Entrar\r\n                    </Link>\r\n                </div>\r\n            </motion.div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Reviews.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1470,1473],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1470,1473],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2679,2682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2679,2682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Star, User, MessageSquare, Send, Loader } from 'lucide-react';\r\nimport { supabase } from '../utils/supabase';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\ninterface Review {\r\n    id: string;\r\n    nota: number;\r\n    comentario: string;\r\n    created_at: string;\r\n    perfis: {\r\n        nome: string;\r\n    };\r\n}\r\n\r\nimport PageHeader from '../components/layout/PageHeader';\r\n\r\nconst Reviews: React.FC = () => {\r\n    const { user } = useAuth();\r\n    const [reviews, setReviews] = useState<Review[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [rating, setRating] = useState(5);\r\n    const [comment, setComment] = useState('');\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    const fetchReviews = async () => {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('avaliacoes')\r\n                .select(`\r\n                    id,\r\n                    nota,\r\n                    comentario,\r\n                    created_at,\r\n                    perfis (nome)\r\n                `)\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (error) throw error;\r\n\r\n            // Handle joined data structure\r\n            const formattedReviews = (data as any[]).map(item => ({\r\n                ...item,\r\n                perfis: Array.isArray(item.perfis) ? item.perfis[0] : item.perfis\r\n            }));\r\n\r\n            setReviews(formattedReviews);\r\n        } catch (err) {\r\n            console.error('Erro ao buscar avaliações:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchReviews();\r\n    }, []);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!user) return;\r\n\r\n        setSubmitting(true);\r\n        setError(null);\r\n        setSuccess(false);\r\n\r\n        try {\r\n            const { error } = await supabase\r\n                .from('avaliacoes')\r\n                .insert([\r\n                    {\r\n                        cliente_id: user.id,\r\n                        nota: rating,\r\n                        comentario: comment,\r\n                        barbeiro_id: null // General review for now\r\n                    }\r\n                ]);\r\n\r\n            if (error) throw error;\r\n\r\n            setSuccess(true);\r\n            setComment('');\r\n            setRating(5);\r\n            fetchReviews(); // Refresh list\r\n        } catch (err: any) {\r\n            setError(err.message || 'Erro ao enviar avaliação');\r\n        } finally {\r\n            setSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg\">\r\n            <PageHeader\r\n                title={<>O QUE DIZEM <span className=\"text-primary\">NOSSOS CLIENTES</span></>}\r\n                subtitle=\"A satisfação dos nossos clientes é a nossa maior recompensa.\"\r\n                backgroundImage=\"https://images.unsplash.com/photo-1599351431202-1e0f0137899a?auto=format&fit=crop&q=80&w=1976\"\r\n            />\r\n\r\n            <div className=\"max-w-4xl mx-auto px-4 py-16\">\r\n                {/* Submission Form */}\r\n                {user ? (\r\n                    <div className=\"bg-card-bg p-8 rounded-2xl border border-white/5 mb-16 shadow-xl relative overflow-hidden\">\r\n                        <div className=\"absolute top-0 left-0 w-1 h-full bg-primary\" />\r\n                        <h3 className=\"text-2xl font-bold text-white mb-6 flex items-center\">\r\n                            <MessageSquare className=\"w-6 h-6 mr-3 text-primary\" /> Deixe sua Avaliação\r\n                        </h3>\r\n\r\n                        {success && (\r\n                            <div className=\"bg-green-500/10 border border-green-500/20 text-green-500 p-4 rounded-xl mb-6 flex items-center\">\r\n                                <Star className=\"w-5 h-5 mr-2 fill-current\" />\r\n                                Avaliação enviada com sucesso! Obrigado pelo feedback.\r\n                            </div>\r\n                        )}\r\n\r\n                        {error && (\r\n                            <div className=\"bg-red-500/10 border border-red-500/20 text-red-500 p-4 rounded-xl mb-6\">\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        <form onSubmit={handleSubmit}>\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-gray-400 mb-3 font-medium\">Sua Nota</label>\r\n                                <div className=\"flex space-x-2\">\r\n                                    {[1, 2, 3, 4, 5].map((star) => (\r\n                                        <button\r\n                                            key={star}\r\n                                            type=\"button\"\r\n                                            onClick={() => setRating(star)}\r\n                                            className={`focus:outline-none transition-transform hover:scale-110 ${star <= rating ? 'text-primary' : 'text-gray-700'}`}\r\n                                        >\r\n                                            <Star className=\"w-10 h-10 fill-current\" />\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"mb-6\">\r\n                                <label className=\"block text-gray-400 mb-3 font-medium\">Seu Comentário</label>\r\n                                <textarea\r\n                                    value={comment}\r\n                                    onChange={(e) => setComment(e.target.value)}\r\n                                    className=\"w-full bg-dark-bg border border-white/10 rounded-xl p-4 text-white focus:border-primary focus:outline-none h-32 transition-colors\"\r\n                                    placeholder=\"Conte-nos como foi sua experiência...\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={submitting}\r\n                                className=\"btn-primary w-full flex justify-center items-center py-4 text-lg\"\r\n                            >\r\n                                {submitting ? <Loader className=\"w-6 h-6 animate-spin mr-2\" /> : <Send className=\"w-5 h-5 mr-2\" />}\r\n                                Enviar Avaliação\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"bg-card-bg p-10 rounded-2xl border border-white/5 mb-16 text-center shadow-xl\">\r\n                        <Star className=\"w-16 h-16 text-primary mx-auto mb-6 opacity-50\" />\r\n                        <h3 className=\"text-2xl font-bold text-white mb-4\">Quer avaliar nossos serviços?</h3>\r\n                        <p className=\"text-gray-400 mb-8 max-w-md mx-auto\">Faça login para compartilhar sua experiência com a comunidade Barbearia Dourado.</p>\r\n                        <a href=\"/login\" className=\"btn-outline px-8 py-3\">Entrar na Conta</a>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Reviews List */}\r\n                {loading ? (\r\n                    <div className=\"flex justify-center py-12\">\r\n                        <Loader className=\"w-10 h-10 text-primary animate-spin\" />\r\n                    </div>\r\n                ) : reviews.length > 0 ? (\r\n                    <div className=\"grid gap-6\">\r\n                        {reviews.map((review) => (\r\n                            <motion.div\r\n                                key={review.id}\r\n                                initial={{ opacity: 0, y: 20 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                className=\"bg-card-bg p-8 rounded-2xl border border-white/5 hover:border-primary/30 transition-all shadow-lg\"\r\n                            >\r\n                                <div className=\"flex justify-between items-start mb-6\">\r\n                                    <div className=\"flex items-center\">\r\n                                        <div className=\"w-12 h-12 bg-dark-bg rounded-full flex items-center justify-center mr-4 border border-white/5 text-primary font-bold text-xl\">\r\n                                            {review.perfis?.nome ? review.perfis.nome.charAt(0).toUpperCase() : <User className=\"w-6 h-6\" />}\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-white text-lg\">{review.perfis?.nome || 'Cliente'}</h4>\r\n                                            <span className=\"text-sm text-gray-500\">{new Date(review.created_at).toLocaleDateString('pt-PT')}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex text-primary bg-primary/5 px-3 py-1 rounded-lg border border-primary/10\">\r\n                                        {[...Array(5)].map((_, i) => (\r\n                                            <Star key={i} className={`w-4 h-4 ${i < review.nota ? 'fill-current' : 'text-gray-800'}`} />\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"relative\">\r\n                                    <span className=\"absolute -top-2 -left-2 text-6xl text-primary/10 font-serif\">\"</span>\r\n                                    <p className=\"text-gray-300 italic text-lg leading-relaxed pl-6 relative z-10\">{review.comentario}</p>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"text-center py-20\">\r\n                        <MessageSquare className=\"w-20 h-20 text-gray-800 mx-auto mb-6\" />\r\n                        <h3 className=\"text-2xl font-bold text-white mb-2\">Nenhuma avaliação ainda</h3>\r\n                        <p className=\"text-gray-500\">Seja o primeiro a avaliar!</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Reviews;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Services.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\Shop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\admin\\Appointments.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2323,2326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2323,2326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAppointments'. Either include it or remove the dependency array.","line":82,"column":8,"nodeType":"ArrayExpression","endLine":82,"endColumn":20,"suggestions":[{"desc":"Update the dependencies array to be: [dateFilter, fetchAppointments]","fix":{"range":[2936,2948],"text":"[dateFilter, fetchAppointments]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { format } from 'date-fns';\r\nimport { pt } from 'date-fns/locale';\r\nimport { Check, X, Search, Filter, Loader, Calendar, Clock, User, Scissors } from 'lucide-react';\r\nimport { supabase } from '../../utils/supabase';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface Appointment {\r\n    id: string;\r\n    data_hora: string;\r\n    status: string;\r\n    perfis: {\r\n        nome: string;\r\n        telemovel: string;\r\n        email?: string;\r\n    } | null;\r\n    servicos: {\r\n        nome: string;\r\n        preco: number;\r\n        duracao: number;\r\n    } | null;\r\n    barbeiros: {\r\n        nome: string;\r\n    } | null;\r\n}\r\n\r\nconst AdminAppointments: React.FC = () => {\r\n    const [appointments, setAppointments] = useState<Appointment[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [statusFilter, setStatusFilter] = useState('todos');\r\n    const [dateFilter, setDateFilter] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n    const fetchAppointments = async () => {\r\n        setLoading(true);\r\n        try {\r\n            let query = supabase\r\n                .from('agendamentos')\r\n                .select(`\r\n                    id,\r\n                    data_hora,\r\n                    status,\r\n                    perfis (nome, telemovel, email),\r\n                    servicos (nome, preco, duracao),\r\n                    barbeiros (nome)\r\n                `)\r\n                .order('data_hora', { ascending: true });\r\n\r\n            // If a specific date is selected, filter by that day\r\n            if (dateFilter) {\r\n                const startDate = `${dateFilter}T00:00:00`;\r\n                const endDate = `${dateFilter}T23:59:59`;\r\n                query = query.gte('data_hora', startDate).lte('data_hora', endDate);\r\n            } else {\r\n                // If no date selected (Upcoming view), show from today onwards\r\n                const today = new Date().toISOString().split('T')[0];\r\n                const startDate = `${today}T00:00:00`;\r\n                query = query.gte('data_hora', startDate);\r\n            }\r\n\r\n            const { data, error } = await query;\r\n\r\n            if (error) throw error;\r\n\r\n            const formattedData = (data as any[]).map(item => ({\r\n                ...item,\r\n                perfis: Array.isArray(item.perfis) ? item.perfis[0] : item.perfis,\r\n                servicos: Array.isArray(item.servicos) ? item.servicos[0] : item.servicos,\r\n                barbeiros: Array.isArray(item.barbeiros) ? item.barbeiros[0] : item.barbeiros\r\n            }));\r\n\r\n            setAppointments(formattedData);\r\n        } catch (error) {\r\n            console.error('Erro ao buscar agendamentos:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchAppointments();\r\n    }, [dateFilter]);\r\n\r\n    const handleStatusUpdate = async (id: string, newStatus: string) => {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('agendamentos')\r\n                .update({ status: newStatus })\r\n                .eq('id', id);\r\n\r\n            if (error) throw error;\r\n\r\n            setAppointments(prev => prev.map(apt =>\r\n                apt.id === id ? { ...apt, status: newStatus } : apt\r\n            ));\r\n        } catch (error) {\r\n            console.error('Erro ao atualizar status:', error);\r\n        }\r\n    };\r\n\r\n    const filteredAppointments = appointments.filter(apt => {\r\n        const matchesSearch = apt.perfis?.nome.toLowerCase().includes(searchTerm.toLowerCase());\r\n        const matchesStatus = statusFilter === 'todos' || apt.status === statusFilter;\r\n        return matchesSearch && matchesStatus;\r\n    });\r\n\r\n    const getStatusStyle = (status: string) => {\r\n        switch (status) {\r\n            case 'confirmado': return 'bg-green-500/10 text-green-500 border-green-500/20';\r\n            case 'pendente': return 'bg-yellow-500/10 text-yellow-500 border-yellow-500/20';\r\n            case 'cancelado': return 'bg-red-500/10 text-red-500 border-red-500/20';\r\n            default: return 'bg-gray-500/10 text-gray-500 border-gray-500/20';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <header className=\"flex flex-col md:flex-row justify-between items-end gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-heading font-bold text-white\">Agendamentos</h1>\r\n                    <p className=\"text-gray-400\">Gerencie todas as marcações da barbearia.</p>\r\n                </div>\r\n\r\n                <div className=\"flex bg-zinc-900 border border-white/10 rounded-xl p-1 items-center\">\r\n                    <input\r\n                        type=\"date\"\r\n                        value={dateFilter}\r\n                        onChange={(e) => setDateFilter(e.target.value)}\r\n                        className=\"bg-transparent text-white px-4 py-2 outline-none cursor-pointer\"\r\n                    />\r\n                    {dateFilter && (\r\n                        <button\r\n                            onClick={() => setDateFilter('')}\r\n                            className=\"p-2 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition-colors mr-1\"\r\n                            title=\"Limpar filtro de data (Ver Todos Futuros)\"\r\n                        >\r\n                            <span className=\"text-xs font-bold uppercase\">Ver Todos</span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            </header>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex flex-col md:flex-row gap-4\">\r\n                <div className=\"relative flex-1\">\r\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 w-5 h-5\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Buscar por nome do cliente...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"w-full bg-zinc-900/50 backdrop-blur-sm border border-white/10 rounded-xl py-3 pl-10 pr-4 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all\"\r\n                    />\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <Filter className=\"text-primary w-5 h-5\" />\r\n                    <select\r\n                        value={statusFilter}\r\n                        onChange={(e) => setStatusFilter(e.target.value)}\r\n                        className=\"bg-zinc-900/50 backdrop-blur-sm border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all cursor-pointer\"\r\n                    >\r\n                        <option value=\"todos\">Todos os Status</option>\r\n                        <option value=\"pendente\">Pendentes</option>\r\n                        <option value=\"confirmado\">Confirmados</option>\r\n                        <option value=\"cancelado\">Cancelados</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Appointments List */}\r\n            <div className=\"space-y-4\">\r\n                {loading ? (\r\n                    <div className=\"flex justify-center py-20\">\r\n                        <Loader className=\"w-8 h-8 text-primary animate-spin\" />\r\n                    </div>\r\n                ) : filteredAppointments.length > 0 ? (\r\n                    <AnimatePresence>\r\n                        {filteredAppointments.map((apt) => (\r\n                            <motion.div\r\n                                layout\r\n                                initial={{ opacity: 0, y: 10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                exit={{ opacity: 0, scale: 0.95 }}\r\n                                key={apt.id}\r\n                                className=\"bg-zinc-900/40 backdrop-blur-sm border border-white/5 rounded-2xl p-6 hover:border-primary/30 transition-all group\"\r\n                            >\r\n                                <div className=\"flex flex-col lg:flex-row justify-between lg:items-center gap-6\">\r\n\r\n                                    {/* Time & Date */}\r\n                                    <div className=\"flex items-center gap-4 min-w-[180px]\">\r\n                                        <div className=\"p-3 bg-white/5 rounded-xl text-primary group-hover:scale-110 transition-transform\">\r\n                                            <Clock className=\"w-6 h-6\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"text-xl font-bold text-white\">\r\n                                                {format(new Date(apt.data_hora), \"HH:mm\")}\r\n                                            </p>\r\n                                            <p className=\"text-sm text-gray-500 capitalize\">\r\n                                                {format(new Date(apt.data_hora), \"EEEE, d MMM\", { locale: pt })}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Client Info */}\r\n                                    <div className=\"flex items-center gap-4 flex-1\">\r\n                                        <div className=\"hidden sm:flex w-10 h-10 rounded-full bg-zinc-800 items-center justify-center text-gray-400\">\r\n                                            <User className=\"w-5 h-5\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-bold text-white\">{apt.perfis?.nome || 'Cliente Desconhecido'}</p>\r\n                                            <div className=\"flex items-center gap-3 text-sm text-gray-500\">\r\n                                                <span>{apt.perfis?.telemovel}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Service Info */}\r\n                                    <div className=\"flex items-center gap-4 flex-1\">\r\n                                        <div className=\"hidden sm:flex w-10 h-10 rounded-full bg-zinc-800 items-center justify-center text-gray-400\">\r\n                                            <Scissors className=\"w-5 h-5\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-bold text-white\">{apt.servicos?.nome || 'Serviço Removido'}</p>\r\n                                            <div className=\"flex items-center gap-3 text-sm text-gray-500\">\r\n                                                <span>{apt.servicos?.preco}€</span>\r\n                                                <span className=\"w-1 h-1 rounded-full bg-gray-700\" />\r\n                                                <span>{apt.servicos?.duracao} min</span>\r\n                                                <span className=\"w-1 h-1 rounded-full bg-gray-700\" />\r\n                                                <span className=\"text-primary\">{apt.barbeiros?.nome}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Status & Actions */}\r\n                                    <div className=\"flex items-center gap-4 justify-end\">\r\n                                        <div className={`px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider border ${getStatusStyle(apt.status)}`}>\r\n                                            {apt.status}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex gap-2\">\r\n                                            {apt.status === 'pendente' && (\r\n                                                <>\r\n                                                    <button\r\n                                                        onClick={() => handleStatusUpdate(apt.id, 'confirmado')}\r\n                                                        className=\"p-2 bg-green-500/10 text-green-500 rounded-lg hover:bg-green-500/20 active:scale-95 transition-all\"\r\n                                                        title=\"Confirmar\"\r\n                                                    >\r\n                                                        <Check className=\"w-5 h-5\" />\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={() => handleStatusUpdate(apt.id, 'cancelado')}\r\n                                                        className=\"p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20 active:scale-95 transition-all\"\r\n                                                        title=\"Rejeitar\"\r\n                                                    >\r\n                                                        <X className=\"w-5 h-5\" />\r\n                                                    </button>\r\n                                                </>\r\n                                            )}\r\n                                            {apt.status === 'confirmado' && (\r\n                                                <button\r\n                                                    onClick={() => handleStatusUpdate(apt.id, 'cancelado')}\r\n                                                    className=\"p-2 bg-red-500/10 text-red-500 rounded-lg hover:bg-red-500/20 active:scale-95 transition-all\"\r\n                                                    title=\"Cancelar\"\r\n                                                >\r\n                                                    <X className=\"w-5 h-5\" />\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))}\r\n                    </AnimatePresence>\r\n                ) : (\r\n                    <div className=\"text-center py-20 bg-zinc-900/30 rounded-2xl border border-white/5 border-dashed\">\r\n                        <Calendar className=\"w-16 h-16 mx-auto mb-4 text-gray-700\" />\r\n                        <h3 className=\"text-xl font-bold text-white mb-2\">Sem agendamentos</h3>\r\n                        <p className=\"text-gray-500\">Nenhum agendamento encontrado para os filtros selecionados.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminAppointments;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\admin\\CreateBarber.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1868,1871],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1868,1871],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { User, Mail, Lock, Check, ArrowLeft, Loader, Shield, Sparkles, Eye, EyeOff } from 'lucide-react';\r\nimport { supabase } from '../../utils/supabase';\r\nimport ImageUpload from '../../components/ui/ImageUpload';\r\n\r\nconst CreateBarber: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        nome: '',\r\n        bio: '',\r\n        foto_url: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        disponivel: true\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        if (!formData.password || formData.password.length < 6) {\r\n            alert('A palavra-passe deve ter pelo menos 6 caracteres.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        if (formData.password !== formData.confirmPassword) {\r\n            alert('As palavras-passe não coincidem.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const { error } = await supabase.rpc('admin_create_barber_v2', {\r\n                p_email: formData.email,\r\n                p_password: formData.password,\r\n                p_nome: formData.nome,\r\n                p_bio: formData.bio,\r\n                p_foto_url: formData.foto_url,\r\n                p_role: 'barbeiro' // Explicitly setting the role\r\n            });\r\n\r\n            if (error) throw error;\r\n\r\n            // Success animation or redirect\r\n            alert('Barbeiro criado com sucesso!');\r\n            navigate('/admin/gerenciar');\r\n\r\n        } catch (error: any) {\r\n            console.error('Erro ao criar barbeiro:', error);\r\n\r\n            // Handle specific error for duplicate email\r\n            if (error.message?.includes('duplicate key') || error.message?.includes('users_email_partial_key')) {\r\n                alert('Erro: Este endereço de email já está registado. Por favor, utilize outro email.');\r\n            } else {\r\n                alert('Erro ao criar conta: ' + (error.message || 'Erro desconhecido'));\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg text-white p-6 md:p-12 relative overflow-hidden\">\r\n            {/* Background Decorations */}\r\n            <div className=\"absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none\" />\r\n            <div className=\"absolute bottom-0 left-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none\" />\r\n\r\n            <div className=\"max-w-4xl mx-auto relative z-10\">\r\n                <button\r\n                    onClick={() => navigate('/admin/gerenciar')}\r\n                    className=\"flex items-center text-gray-400 hover:text-primary transition-colors mb-8 group\"\r\n                >\r\n                    <ArrowLeft className=\"w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform\" />\r\n                    Voltar para Gestão\r\n                </button>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-5 gap-8\">\r\n                    {/* Header Section */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                        >\r\n                            <h1 className=\"text-4xl font-heading font-bold text-white mb-2\">Novo <span className=\"text-primary\">Profissional</span></h1>\r\n                            <p className=\"text-gray-400 leading-relaxed\">\r\n                                Adicione um novo talento à equipa Barberia Dourado.\r\n                                Esta ação criará automaticamente uma conta de acesso e um perfil público.\r\n                            </p>\r\n                        </motion.div>\r\n\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.9 }}\r\n                            animate={{ opacity: 1, scale: 1 }}\r\n                            transition={{ delay: 0.1 }}\r\n                            className=\"bg-dark/50 border border-primary/20 rounded-2xl p-6 relative overflow-hidden group\"\r\n                        >\r\n                            <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                                <Shield className=\"w-24 h-24 text-primary\" />\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-white mb-2 flex items-center gap-2\">\r\n                                <Sparkles className=\"w-4 h-4 text-primary\" />\r\n                                Credenciais de Acesso\r\n                            </h3>\r\n                            <div className=\"space-y-3 text-sm text-gray-400\">\r\n                                <div className=\"flex items-center gap-3 bg-black/20 p-2 rounded-lg border border-white/5\">\r\n                                    <Mail className=\"w-4 h-4 text-primary\" />\r\n                                    <span>{formData.email || 'email@exemplo.com'}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3 bg-black/20 p-2 rounded-lg border border-white/5\">\r\n                                    <Lock className=\"w-4 h-4 text-primary\" />\r\n                                    <span>{formData.password ? '••••••••' : 'Palavra-passe não definida'}</span>\r\n                                </div>\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n\r\n                    {/* Form Section */}\r\n                    <motion.div\r\n                        initial={{ opacity: 0, x: 20 }}\r\n                        animate={{ opacity: 1, x: 0 }}\r\n                        transition={{ delay: 0.2 }}\r\n                        className=\"lg:col-span-3\"\r\n                    >\r\n                        <form onSubmit={handleSubmit} className=\"bg-dark/40 backdrop-blur-md border border-white/10 rounded-3xl p-8 shadow-2xl\">\r\n                            <div className=\"space-y-6\">\r\n\r\n\r\n                                <div className=\"grid grid-cols-1 gap-6\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs font-bold text-primary uppercase tracking-wider ml-1\">Nome do Profissional</label>\r\n                                        <div className=\"relative\">\r\n                                            <User className=\"w-5 h-5 absolute left-4 top-3.5 text-gray-500\" />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                required\r\n                                                value={formData.nome}\r\n                                                onChange={e => setFormData({ ...formData, nome: e.target.value })}\r\n                                                className=\"w-full bg-black/40 border border-gray-700 rounded-xl py-3 pl-12 pr-4 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-gray-600\"\r\n                                                placeholder=\"Ex: João Silva\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs font-bold text-primary uppercase tracking-wider ml-1\">Email de Acesso</label>\r\n                                        <div className=\"relative\">\r\n                                            <Mail className=\"w-5 h-5 absolute left-4 top-3.5 text-gray-500\" />\r\n                                            <input\r\n                                                type=\"email\"\r\n                                                required\r\n                                                value={formData.email}\r\n                                                onChange={e => setFormData({ ...formData, email: e.target.value })}\r\n                                                className=\"w-full bg-black/40 border border-gray-700 rounded-xl py-3 pl-12 pr-4 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-gray-600\"\r\n                                                placeholder=\"Ex: joao@email.com\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-xs font-bold text-primary uppercase tracking-wider ml-1\">Senha de Acesso</label>\r\n                                            <div className=\"relative\">\r\n                                                <Lock className=\"w-5 h-5 absolute left-4 top-3.5 text-gray-500\" />\r\n                                                <input\r\n                                                    type={showPassword ? \"text\" : \"password\"}\r\n                                                    required\r\n                                                    value={formData.password}\r\n                                                    onChange={e => setFormData({ ...formData, password: e.target.value })}\r\n                                                    className=\"w-full bg-black/40 border border-gray-700 rounded-xl py-3 pl-12 pr-12 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-gray-600\"\r\n                                                    placeholder=\"Mínimo 6 caracteres\"\r\n                                                />\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={() => setShowPassword(!showPassword)}\r\n                                                    className=\"absolute right-4 top-3.5 text-gray-500 hover:text-white transition-colors\"\r\n                                                >\r\n                                                    {showPassword ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"space-y-2\">\r\n                                            <label className=\"text-xs font-bold text-primary uppercase tracking-wider ml-1\">Confirmar Senha</label>\r\n                                            <div className=\"relative\">\r\n                                                <Lock className=\"w-5 h-5 absolute left-4 top-3.5 text-gray-500\" />\r\n                                                <input\r\n                                                    type={showPassword ? \"text\" : \"password\"}\r\n                                                    required\r\n                                                    value={formData.confirmPassword}\r\n                                                    onChange={e => setFormData({ ...formData, confirmPassword: e.target.value })}\r\n                                                    className={`w-full bg-black/40 border rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none transition-all placeholder:text-gray-600 ${formData.confirmPassword && formData.password !== formData.confirmPassword\r\n                                                        ? 'border-red-500 focus:border-red-500 focus:ring-red-500'\r\n                                                        : 'border-gray-700 focus:border-primary focus:ring-primary'\r\n                                                        }`}\r\n                                                    placeholder=\"Repita a senha\"\r\n                                                />\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <ImageUpload\r\n                                            value={formData.foto_url}\r\n                                            onChange={(base64) => setFormData({ ...formData, foto_url: base64 })}\r\n                                            label=\"Foto de Perfil\"\r\n                                            placeholder=\"Carregar foto de perfil\"\r\n                                        />\r\n                                    </div>\r\n\r\n\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <label className=\"text-xs font-bold text-primary uppercase tracking-wider ml-1\">Biografia</label>\r\n                                        <textarea\r\n                                            value={formData.bio}\r\n                                            onChange={e => setFormData({ ...formData, bio: e.target.value })}\r\n                                            className=\"w-full bg-black/40 border border-gray-700 rounded-xl py-3 px-4 text-white focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none transition-all placeholder:text-gray-600 h-32 resize-none\"\r\n                                            placeholder=\"Descreva a experiência e especialidades...\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={loading}\r\n                                    className=\"w-full btn-primary py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 mt-4 hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg shadow-primary/20\"\r\n                                >\r\n                                    {loading ? <Loader className=\"w-6 h-6 animate-spin\" /> : <Check className=\"w-6 h-6\" />}\r\n                                    Criar Conta de Profissional\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </motion.div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateBarber;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\admin\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":2,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[556,559],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[556,559],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { Users, Calendar, ShoppingBag, TrendingUp, Loader, ArrowRight, Clock, Star } from 'lucide-react';\r\nimport { supabase } from '../../utils/supabase';\r\nimport { motion } from 'framer-motion';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AdminDashboard: React.FC = () => {\r\n    const [stats, setStats] = useState({\r\n        totalClients: 0,\r\n        todayAppointments: 0,\r\n        totalProducts: 0,\r\n        pendingReviews: 0\r\n    });\r\n    const [recentActivity, setRecentActivity] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchStats = async () => {\r\n            try {\r\n                const today = new Date().toISOString().split('T')[0];\r\n\r\n                const [clients, appointments, products, reviews, recentApts] = await Promise.all([\r\n                    supabase.from('perfis').select('id', { count: 'exact' }).eq('role', 'cliente'),\r\n                    supabase.from('agendamentos').select('id', { count: 'exact' }).gte('data_hora', `${today}T00:00:00`).lte('data_hora', `${today}T23:59:59`),\r\n                    supabase.from('produtos').select('id', { count: 'exact' }),\r\n                    supabase.from('avaliacoes').select('id', { count: 'exact' }),\r\n                    supabase.from('agendamentos')\r\n                        .select(`\r\n                            id,\r\n                            data_hora,\r\n                            status,\r\n                            perfis (nome),\r\n                            servicos (nome)\r\n                        `)\r\n                        .order('created_at', { ascending: false })\r\n                        .limit(5)\r\n                ]);\r\n\r\n                setStats({\r\n                    totalClients: clients.count || 0,\r\n                    todayAppointments: appointments.count || 0,\r\n                    totalProducts: products.count || 0,\r\n                    pendingReviews: reviews.count || 0\r\n                });\r\n\r\n                setRecentActivity(recentApts.data || []);\r\n            } catch (error) {\r\n                console.error('Erro ao buscar estatísticas:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchStats();\r\n    }, []);\r\n\r\n    const statCards = [\r\n        { title: 'Clientes Totais', value: stats.totalClients, icon: Users, color: 'text-blue-400', bg: 'from-blue-500/20 to-blue-600/5', border: 'border-blue-500/20' },\r\n        { title: 'Agendamentos Hoje', value: stats.todayAppointments, icon: Calendar, color: 'text-amber-400', bg: 'from-amber-500/20 to-amber-600/5', border: 'border-amber-500/20' },\r\n        { title: 'Produtos', value: stats.totalProducts, icon: ShoppingBag, color: 'text-purple-400', bg: 'from-purple-500/20 to-purple-600/5', border: 'border-purple-500/20' },\r\n        { title: 'Avaliações', value: stats.pendingReviews, icon: Star, color: 'text-emerald-400', bg: 'from-emerald-500/20 to-emerald-600/5', border: 'border-emerald-500/20' },\r\n    ];\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"flex justify-center items-center h-full min-h-[400px]\">\r\n                <Loader className=\"w-8 h-8 text-primary animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const container = {\r\n        hidden: { opacity: 0 },\r\n        show: {\r\n            opacity: 1,\r\n            transition: { staggerChildren: 0.1 }\r\n        }\r\n    };\r\n\r\n    const item = {\r\n        hidden: { opacity: 0, y: 20 },\r\n        show: { opacity: 1, y: 0 }\r\n    };\r\n\r\n    return (\r\n        <motion.div variants={container} initial=\"hidden\" animate=\"show\">\r\n            <header className=\"mb-8\">\r\n                <h1 className=\"text-3xl font-heading font-bold text-white\">Dashboard</h1>\r\n                <p className=\"text-gray-400\">Visão geral da sua barbearia hoje.</p>\r\n            </header>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n                {statCards.map((stat, index) => (\r\n                    <motion.div\r\n                        key={index}\r\n                        variants={item}\r\n                        whileHover={{ y: -5 }}\r\n                        className={`p-6 rounded-xl border ${stat.border} bg-gradient-to-br ${stat.bg} backdrop-blur-sm relative overflow-hidden group`}\r\n                    >\r\n                        <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                            <stat.icon className=\"w-16 h-16\" />\r\n                        </div>\r\n                        <div className=\"relative z-10\">\r\n                            <div className={`p-3 rounded-lg w-fit mb-4 bg-black/20 ${stat.color}`}>\r\n                                <stat.icon className=\"w-6 h-6\" />\r\n                            </div>\r\n                            <h3 className=\"text-3xl font-bold text-white mb-1\">{stat.value}</h3>\r\n                            <p className=\"text-gray-400 text-sm font-medium uppercase tracking-wide\">{stat.title}</p>\r\n                        </div>\r\n                    </motion.div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Main Action Area */}\r\n                <motion.div variants={item} className=\"lg:col-span-2 space-y-8\">\r\n                    {/* Recent Activity */}\r\n                    <div className=\"bg-zinc-900/50 border border-white/5 rounded-2xl p-6 backdrop-blur-sm\">\r\n                        <div className=\"flex justify-between items-center mb-6\">\r\n                            <h2 className=\"text-xl font-bold text-white\">Últimos Agendamentos</h2>\r\n                            <Link to=\"/admin/agendamentos\" className=\"text-primary hover:text-amber-300 text-sm flex items-center gap-1 transition-colors\">\r\n                                Ver todos <ArrowRight className=\"w-4 h-4\" />\r\n                            </Link>\r\n                        </div>\r\n\r\n                        {recentActivity.length > 0 ? (\r\n                            <div className=\"space-y-3\">\r\n                                {recentActivity.map((apt) => (\r\n                                    <div key={apt.id} className=\"flex items-center justify-between p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors border border-white/5 group\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div className=\"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center text-gray-400 group-hover:text-primary transition-colors\">\r\n                                                <Users className=\"w-5 h-5\" />\r\n                                            </div>\r\n                                            <div>\r\n                                                <p className=\"font-bold text-white\">\r\n                                                    {Array.isArray(apt.perfis) ? apt.perfis[0]?.nome : apt.perfis?.nome || 'Cliente Desconhecido'}\r\n                                                </p>\r\n                                                <p className=\"text-sm text-gray-400\">\r\n                                                    {Array.isArray(apt.servicos) ? apt.servicos[0]?.nome : apt.servicos?.nome}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <div className=\"flex items-center gap-2 text-gray-400 text-sm mb-1 justify-end\">\r\n                                                <Clock className=\"w-3 h-3\" />\r\n                                                {new Date(apt.data_hora).toLocaleDateString('pt-PT')}\r\n                                            </div>\r\n                                            <span className={`px-2 py-0.5 rounded text-xs font-bold uppercase tracking-wider\r\n                                                ${apt.status === 'confirmado' ? 'bg-green-500/20 text-green-400' :\r\n                                                    apt.status === 'pendente' ? 'bg-yellow-500/20 text-yellow-400' : 'bg-red-500/20 text-red-400'\r\n                                                }`}>\r\n                                                {apt.status}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"text-center py-10 text-gray-500\">\r\n                                <Calendar className=\"w-12 h-12 mx-auto mb-3 opacity-20\" />\r\n                                <p>Sem agendamentos recentes.</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </motion.div>\r\n\r\n                {/* Quick Actions Sidebar */}\r\n                <motion.div variants={item} className=\"space-y-6\">\r\n                    <div className=\"bg-zinc-900/50 border border-white/5 rounded-2xl p-6 backdrop-blur-sm\">\r\n                        <h2 className=\"text-xl font-bold text-white mb-6\">Ações Rápidas</h2>\r\n                        <div className=\"space-y-3\">\r\n                            <button onClick={() => window.location.href = '/admin/agendamentos'}\r\n                                className=\"w-full p-4 rounded-xl bg-white/5 hover:bg-primary/10 border border-white/5 hover:border-primary/30 flex items-center gap-4 transition-all group text-left\">\r\n                                <div className=\"p-2 rounded-lg bg-primary/20 text-primary group-hover:scale-110 transition-transform\">\r\n                                    <Calendar className=\"w-5 h-5\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-white group-hover:text-primary transition-colors\">Gerir Agenda</h3>\r\n                                    <p className=\"text-xs text-gray-400\">Consultar marcações</p>\r\n                                </div>\r\n                            </button>\r\n\r\n                            <button onClick={() => window.location.href = '/admin/gerenciar'}\r\n                                className=\"w-full p-4 rounded-xl bg-white/5 hover:bg-blue-500/10 border border-white/5 hover:border-blue-500/30 flex items-center gap-4 transition-all group text-left\">\r\n                                <div className=\"p-2 rounded-lg bg-blue-500/20 text-blue-500 group-hover:scale-110 transition-transform\">\r\n                                    <Users className=\"w-5 h-5\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-white group-hover:text-blue-400 transition-colors\">Barbeiros & Serviços</h3>\r\n                                    <p className=\"text-xs text-gray-400\">Adicionar ou editar</p>\r\n                                </div>\r\n                            </button>\r\n\r\n                            <button onClick={() => window.location.href = '/admin/produtos'}\r\n                                className=\"w-full p-4 rounded-xl bg-white/5 hover:bg-purple-500/10 border border-white/5 hover:border-purple-500/30 flex items-center gap-4 transition-all group text-left\">\r\n                                <div className=\"p-2 rounded-lg bg-purple-500/20 text-purple-500 group-hover:scale-110 transition-transform\">\r\n                                    <ShoppingBag className=\"w-5 h-5\" />\r\n                                </div>\r\n                                <div>\r\n                                    <h3 className=\"font-bold text-white group-hover:text-purple-400 transition-colors\">Loja Online</h3>\r\n                                    <p className=\"text-xs text-gray-400\">Gerir produtos</p>\r\n                                </div>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\admin\\Gallery.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\admin\\Manage.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1397,1400],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1397,1400],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":51,"column":8,"nodeType":"ArrayExpression","endLine":51,"endColumn":19,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, fetchData]","fix":{"range":[1462,1473],"text":"[activeTab, fetchData]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2430,2433],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2430,2433],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3951,3954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3951,3954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":168,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5764,5767],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5764,5767],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6041,6044],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6041,6044],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":213,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":213,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7592,7595],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7592,7595],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Plus, Edit, Trash, Save, Loader, Scissors, Users, X } from 'lucide-react';\r\nimport { supabase } from '../../utils/supabase';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport ImageUpload from '../../components/ui/ImageUpload';\r\n\r\n// Types\r\ninterface Service {\r\n    id: string;\r\n    nome: string;\r\n    descricao: string;\r\n    preco: number;\r\n    duracao: number;\r\n    imagem_url: string;\r\n}\r\n\r\ninterface Barber {\r\n    id: string;\r\n    nome: string;\r\n    bio: string;\r\n    foto_url: string;\r\n    disponivel: boolean;\r\n    email?: string;\r\n    password?: string;\r\n}\r\n\r\ninterface UserProfile {\r\n    id: string;\r\n    nome: string;\r\n    email: string;\r\n    role: string;\r\n}\r\n\r\nconst AdminManage: React.FC = () => {\r\n    const navigate = useNavigate();\r\n    const [activeTab, setActiveTab] = useState<'services' | 'barbers' | 'users'>('services');\r\n    const [services, setServices] = useState<Service[]>([]);\r\n    const [barbers, setBarbers] = useState<Barber[]>([]);\r\n    const [users, setUsers] = useState<UserProfile[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [isCreating, setIsCreating] = useState(false);\r\n\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState<any>({});\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [activeTab]);\r\n\r\n\r\n\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            if (activeTab === 'services') {\r\n                const { data, error } = await supabase.from('servicos').select('*').order('nome');\r\n                if (error) throw error;\r\n                setServices(data || []);\r\n            } else if (activeTab === 'barbers') {\r\n                const { data, error } = await supabase.from('barbeiros').select('*').order('nome');\r\n                if (error) throw error;\r\n                setBarbers(data || []);\r\n            } else {\r\n                const { data, error } = await supabase.from('perfis').select('*').order('nome');\r\n                if (error) throw error;\r\n                setUsers(data || []);\r\n            }\r\n        } catch (error) {\r\n            console.error('Erro ao buscar dados:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (item: any) => {\r\n        setEditingId(item.id);\r\n        setFormData(item);\r\n        setIsCreating(false);\r\n    };\r\n\r\n    const handleCreate = () => {\r\n        if (activeTab === 'barbers') {\r\n            navigate('/admin/criar-barbeiro');\r\n            return;\r\n        }\r\n\r\n        setEditingId(null);\r\n        if (activeTab === 'services') {\r\n            setFormData({ nome: '', descricao: '', preco: 0, duracao: 30, imagem_url: '' });\r\n        } else {\r\n            setFormData({});\r\n        }\r\n        setIsCreating(true);\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        setEditingId(null);\r\n        setIsCreating(false);\r\n        setFormData({});\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!window.confirm('Tem certeza que deseja excluir este item? Esta ação é irreversível.')) return;\r\n\r\n        try {\r\n            if (activeTab === 'barbers') {\r\n                // Use the special RPC for barbers to clean up auth user and profile\r\n                const { error } = await supabase.rpc('admin_delete_barber', { target_barber_id: id });\r\n                if (error) throw error;\r\n            } else {\r\n                // Standard delete for other items\r\n                let table = '';\r\n                if (activeTab === 'services') table = 'servicos';\r\n                else table = 'perfis';\r\n\r\n                const { error } = await supabase.from(table).delete().eq('id', id);\r\n                if (error) throw error;\r\n            }\r\n\r\n            fetchData();\r\n        } catch (error: any) {\r\n            console.error('Erro ao excluir:', error);\r\n            alert('Erro ao excluir item: ' + (error.message || error.error_description || 'Erro desconhecido'));\r\n        }\r\n    };\r\n\r\n    const handleSave = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        try {\r\n            let table = '';\r\n            if (activeTab === 'services') table = 'servicos';\r\n            else if (activeTab === 'barbers') table = 'barbeiros';\r\n            else table = 'perfis';\r\n\r\n            if (isCreating) {\r\n                if (activeTab === 'barbers') {\r\n                    // Use RPC to create barber + auth user + profile\r\n                    const { error } = await supabase.rpc('admin_create_barber', {\r\n                        p_email: formData.email,\r\n                        p_password: formData.password,\r\n                        p_nome: formData.nome,\r\n                        p_bio: formData.bio || '',\r\n                        p_foto_url: formData.foto_url || ''\r\n                    });\r\n                    if (error) throw error;\r\n                } else {\r\n                    const { error } = await supabase.from(table).insert([formData]);\r\n                    if (error) throw error;\r\n                }\r\n            } else {\r\n                const { error } = await supabase.from(table).update(formData).eq('id', editingId);\r\n                if (error) throw error;\r\n            }\r\n\r\n            handleCancel();\r\n            fetchData();\r\n        } catch (error) {\r\n            console.error('Erro ao salvar:', error);\r\n            alert('Erro ao salvar item.');\r\n        }\r\n    };\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n        const { name, value, type } = e.target;\r\n        setFormData((prev: any) => ({\r\n            ...prev,\r\n            [name]: type === 'number' ? parseFloat(value) : value\r\n        }));\r\n    };\r\n\r\n    const handleCheckboxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const { name, checked } = e.target;\r\n        setFormData((prev: any) => ({\r\n            ...prev,\r\n            [name]: checked\r\n        }));\r\n    };\r\n\r\n    const tabs = [\r\n        { id: 'services', label: 'Serviços', icon: Scissors },\r\n        { id: 'barbers', label: 'Barbeiros', icon: Users },\r\n        { id: 'users', label: 'Utilizadores', icon: Users },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <header className=\"flex flex-col md:flex-row justify-between items-center gap-4\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-heading font-bold text-white\">Gestão</h1>\r\n                    <p className=\"text-gray-400\">Administre serviços, equipa e utilizadores.</p>\r\n                </div>\r\n\r\n                {activeTab !== 'users' && !isCreating && !editingId && (\r\n                    <motion.button\r\n                        whileHover={{ scale: 1.05 }}\r\n                        whileTap={{ scale: 0.95 }}\r\n                        onClick={handleCreate}\r\n                        className=\"btn-primary px-5 py-2.5 font-bold flex items-center shadow-lg shadow-primary/20\"\r\n                    >\r\n                        <Plus className=\"w-5 h-5 mr-2\" /> Novo Item\r\n                    </motion.button>\r\n                )}\r\n            </header>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex p-1 bg-zinc-900/50 backdrop-blur-sm border border-white/5 rounded-xl w-fit\">\r\n                {tabs.map((tab) => (\r\n                    <button\r\n                        key={tab.id}\r\n                        onClick={() => { setActiveTab(tab.id as any); handleCancel(); }}\r\n                        className={`relative px-6 py-2.5 rounded-lg flex items-center gap-2 font-medium transition-colors ${activeTab === tab.id ? 'text-white' : 'text-gray-400 hover:text-white'\r\n                            }`}\r\n                    >\r\n                        {activeTab === tab.id && (\r\n                            <motion.div\r\n                                layoutId=\"active-tab\"\r\n                                className=\"absolute inset-0 bg-white/10 rounded-lg border border-white/10\"\r\n                                transition={{ type: \"spring\", bounce: 0.2, duration: 0.6 }}\r\n                            />\r\n                        )}\r\n                        <span className=\"relative z-10 flex items-center gap-2\">\r\n                            <tab.icon className=\"w-4 h-4\" />\r\n                            {tab.label}\r\n                        </span>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <AnimatePresence mode=\"wait\">\r\n                {(isCreating || editingId) ? (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 20 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        exit={{ opacity: 0, y: -20 }}\r\n                        className=\"bg-zinc-900/80 backdrop-blur-md p-8 rounded-2xl border border-primary/20 max-w-2xl mx-auto shadow-2xl relative overflow-hidden\"\r\n                    >\r\n                        <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary to-transparent\" />\r\n\r\n                        <div className=\"flex justify-between items-center mb-8\">\r\n                            <h2 className=\"text-2xl font-bold text-white\">{isCreating ? 'Criar Novo' : 'Editar Item'}</h2>\r\n                            <button onClick={handleCancel} className=\"p-2 hover:bg-white/10 rounded-full transition-colors\"><X className=\"w-5 h-5 text-gray-400\" /></button>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSave} className=\"space-y-6\">\r\n                            {activeTab === 'services' ? (\r\n                                <>\r\n                                    <div className=\"space-y-4\">\r\n                                        <div>\r\n                                            <label className=\"text-sm text-gray-400 font-medium ml-1 block mb-2\">Nome do Serviço</label>\r\n                                            <input type=\"text\" name=\"nome\" value={formData.nome || ''} onChange={handleChange}\r\n                                                className=\"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all\" required />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"text-sm text-gray-400 font-medium ml-1 block mb-2\">Descrição</label>\r\n                                            <textarea name=\"descricao\" value={formData.descricao || ''} onChange={handleChange} rows={3}\r\n                                                className=\"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all\" required />\r\n                                        </div>\r\n                                        <div className=\"grid grid-cols-2 gap-6\">\r\n                                            <div>\r\n                                                <label className=\"text-sm text-gray-400 font-medium ml-1 block mb-2\">Preço (€)</label>\r\n                                                <input type=\"number\" name=\"preco\" value={formData.preco || ''} onChange={handleChange} step=\"0.01\"\r\n                                                    className=\"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all\" required />\r\n                                            </div>\r\n                                            <div>\r\n                                                <label className=\"text-sm text-gray-400 font-medium ml-1 block mb-2\">Duração (min)</label>\r\n                                                <input type=\"number\" name=\"duracao\" value={formData.duracao || ''} onChange={handleChange}\r\n                                                    className=\"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all\" required />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div>\r\n                                            <ImageUpload\r\n                                                value={formData.imagem_url}\r\n                                                onChange={(base64) => setFormData({ ...formData, imagem_url: base64 })}\r\n                                                label=\"Imagem do Serviço\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </>\r\n                            ) : activeTab === 'barbers' ? (\r\n                                <>\r\n                                    <div className=\"space-y-4\">\r\n                                        <div>\r\n                                            <label className=\"text-sm text-gray-400 font-medium ml-1 block mb-2\">Nome</label>\r\n                                            <input type=\"text\" name=\"nome\" value={formData.nome || ''} onChange={handleChange}\r\n                                                className=\"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all\" required />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"text-sm text-gray-400 font-medium ml-1 block mb-2\">Bio</label>\r\n                                            <textarea name=\"bio\" value={formData.bio || ''} onChange={handleChange} rows={3}\r\n                                                className=\"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-white focus:border-primary/50 focus:ring-1 focus:ring-primary/50 outline-none transition-all\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <ImageUpload\r\n                                                value={formData.foto_url}\r\n                                                onChange={(base64) => setFormData({ ...formData, foto_url: base64 })}\r\n                                                label=\"Foto de Perfil\"\r\n                                            />\r\n                                        </div>\r\n                                        <label className=\"flex items-center gap-3 p-4 rounded-xl bg-white/5 border border-white/5 cursor-pointer hover:bg-white/10 transition-colors\">\r\n                                            <input type=\"checkbox\" name=\"disponivel\" checked={formData.disponivel || false} onChange={handleCheckboxChange}\r\n                                                className=\"w-5 h-5 rounded border-gray-600 text-primary focus:ring-primary bg-transparent\" />\r\n                                            <span className=\"text-white font-medium\">Disponível para agendamentos</span>\r\n                                        </label>\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <div className=\"text-center py-8 text-gray-400\">\r\n                                    <Users className=\"w-12 h-12 mx-auto mb-3 opacity-20\" />\r\n                                    <p>Edição de utilizadores é limitada por segurança. Use a SQL se necessário.</p>\r\n                                </div>\r\n                            )}\r\n\r\n                            <div className=\"flex justify-end gap-3 pt-6 border-t border-white/5\">\r\n                                <button type=\"button\" onClick={handleCancel} className=\"px-6 py-2.5 rounded-xl text-gray-400 hover:text-white hover:bg-white/5 transition-colors font-medium\">Cancelar</button>\r\n                                <button type=\"submit\" className=\"btn-primary px-8 py-2.5 font-bold rounded-xl shadow-lg shadow-primary/20 flex items-center\">\r\n                                    <Save className=\"w-4 h-4 mr-2\" /> Salvar Alterações\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </motion.div>\r\n                ) : (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\r\n                    >\r\n                        {loading ? (\r\n                            <div className=\"col-span-full flex justify-center py-20\">\r\n                                <Loader className=\"w-8 h-8 text-primary animate-spin\" />\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {activeTab === 'services' && services.map((service) => (\r\n                                    <motion.div layoutId={service.id} key={service.id} className=\"bg-zinc-900 border border-white/5 rounded-2xl p-5 hover:border-primary/30 transition-colors group relative overflow-hidden\">\r\n                                        <div className=\"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2\">\r\n                                            <button onClick={() => handleEdit(service)} className=\"p-2 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20\"><Edit className=\"w-4 h-4\" /></button>\r\n                                            <button onClick={() => handleDelete(service.id)} className=\"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20\"><Trash className=\"w-4 h-4\" /></button>\r\n                                        </div>\r\n                                        <div className=\"flex justify-between items-start mb-4\">\r\n                                            <h3 className=\"font-bold text-white text-lg\">{service.nome}</h3>\r\n                                        </div>\r\n                                        <p className=\"text-gray-400 text-sm mb-4 line-clamp-2 h-10\">{service.descricao}</p>\r\n                                        <div className=\"flex items-center justify-between mt-auto\">\r\n                                            <span className=\"text-2xl font-bold text-primary\">{service.preco}€</span>\r\n                                            <span className=\"text-xs font-bold uppercase tracking-wider text-gray-500 bg-white/5 px-2 py-1 rounded-lg\">{service.duracao} min</span>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ))}\r\n\r\n                                {activeTab === 'barbers' && barbers.map((barber) => (\r\n                                    <motion.div layoutId={barber.id} key={barber.id} className=\"bg-zinc-900 border border-white/5 rounded-2xl p-6 hover:border-primary/30 transition-colors group relative\">\r\n                                        <div className=\"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2 z-10\">\r\n                                            <button onClick={() => handleEdit(barber)} className=\"p-2 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20\"><Edit className=\"w-4 h-4\" /></button>\r\n                                            <button onClick={() => handleDelete(barber.id)} className=\"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20\"><Trash className=\"w-4 h-4\" /></button>\r\n                                        </div>\r\n                                        <div className=\"flex flex-col items-center text-center\">\r\n                                            <div className=\"w-24 h-24 rounded-full bg-zinc-800 mb-4 overflow-hidden ring-2 ring-white/5 group-hover:ring-primary/50 transition-all\">\r\n                                                {barber.foto_url ? (\r\n                                                    <img src={barber.foto_url} alt={barber.nome} className=\"w-full h-full object-cover\" />\r\n                                                ) : (\r\n                                                    <div className=\"w-full h-full flex items-center justify-center text-gray-600\"><Users className=\"w-10 h-10\" /></div>\r\n                                                )}\r\n                                            </div>\r\n                                            <h3 className=\"font-bold text-xl text-white mb-1\">{barber.nome}</h3>\r\n                                            <div className={`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium ${barber.disponivel ? 'bg-green-500/10 text-green-500' : 'bg-red-500/10 text-red-500'}`}>\r\n                                                <span className={`w-1.5 h-1.5 rounded-full ${barber.disponivel ? 'bg-green-500' : 'bg-red-500'}`} />\r\n                                                {barber.disponivel ? 'Disponível' : 'Indisponível'}\r\n                                            </div>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ))}\r\n\r\n                                {activeTab === 'users' && users.map((user) => (\r\n                                    <motion.div layoutId={user.id} key={user.id} className=\"bg-zinc-900 border border-white/5 rounded-2xl p-5 flex items-center gap-4 hover:border-white/10 transition-colors\">\r\n                                        <div className=\"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center text-gray-400 font-bold text-lg\">\r\n                                            {user.nome.charAt(0)}\r\n                                        </div>\r\n                                        <div>\r\n                                            <h3 className=\"font-bold text-white\">{user.nome}</h3>\r\n                                            <p className=\"text-sm text-gray-500\">{user.email}</p>\r\n                                            <span className=\"text-xs text-primary mt-1 block uppercase tracking-wider font-bold\">{user.role}</span>\r\n                                        </div>\r\n                                    </motion.div>\r\n                                ))}\r\n                            </>\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminManage;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\admin\\Products.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\pages\\barber\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[457,460],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[457,460],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAppointments'. Either include it or remove the dependency array.","line":16,"column":8,"nodeType":"ArrayExpression","endLine":16,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAppointments, user]","fix":{"range":[611,617],"text":"[fetchAppointments, user]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { supabase } from '../../utils/supabase';\r\nimport { Calendar, Clock, User, Scissors, LogOut } from 'lucide-react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst BarberDashboard: React.FC = () => {\r\n    const { user, signOut } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [appointments, setAppointments] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n        fetchAppointments();\r\n    }, [user]);\r\n\r\n    const fetchAppointments = async () => {\r\n        if (!user) return;\r\n        try {\r\n            // Get Barber ID using EMAIL (linking mechanism changed as per request)\r\n            // Get Barber ID using user_id\r\n            const { data: barberData, error: barberError } = await supabase\r\n                .from('barbeiros')\r\n                .select('id')\r\n                .eq('user_id', user.id) // Corrected: use user_id not email\r\n                .single();\r\n\r\n            if (barberError || !barberData) {\r\n                console.error(\"Barber not found linked to this user\");\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const { data, error } = await supabase\r\n                .from('agendamentos')\r\n                .select(`\r\n                    *,\r\n                    servico:servicos(nome, duracao, preco),\r\n                    cliente:perfis(nome, telemovel)\r\n                `)\r\n                .eq('barbeiro_id', barberData.id)\r\n                .order('data_hora', { ascending: true });\r\n\r\n            if (error) throw error;\r\n            setAppointments(data || []);\r\n        } catch (error) {\r\n            console.error('Error fetching appointments:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSignOut = async () => {\r\n        await signOut();\r\n        navigate('/login');\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-dark-bg text-white p-6\">\r\n            <header className=\"flex justify-between items-center mb-8 border-b border-gray-800 pb-4\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-heading font-bold text-primary\">Painel do Barbeiro</h1>\r\n                    <p className=\"text-gray-400\">Bem-vindo, {user?.user_metadata?.nome || 'Profissional'}</p>\r\n                </div>\r\n                <div className=\"flex gap-4\">\r\n                    <button\r\n                        onClick={() => navigate('/')}\r\n                        className=\"flex items-center text-gray-400 hover:text-white transition-colors\"\r\n                    >\r\n                        Voltar ao Site\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSignOut}\r\n                        className=\"flex items-center text-red-400 hover:text-red-300 transition-colors\"\r\n                    >\r\n                        <LogOut className=\"w-5 h-5 mr-2\" /> Sair\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                <div className=\"bg-dark p-6 rounded-xl border border-gray-800\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"p-3 bg-primary/20 rounded-lg text-primary\">\r\n                            <Calendar className=\"w-6 h-6\" />\r\n                        </div>\r\n                        <div>\r\n                            <p className=\"text-gray-400 text-sm\">Marcações Hoje</p>\r\n                            <p className=\"text-2xl font-bold text-white\">{appointments.length}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {/* Add more stats here if needed */}\r\n            </div>\r\n\r\n            <h2 className=\"text-xl font-bold text-white mb-4\">Próximos Agendamentos</h2>\r\n\r\n            {loading ? (\r\n                <p className=\"text-gray-400\">A carregar...</p>\r\n            ) : appointments.length === 0 ? (\r\n                <div className=\"text-center py-10 bg-dark rounded-xl border border-gray-800\">\r\n                    <Calendar className=\"w-12 h-12 text-gray-600 mx-auto mb-3\" />\r\n                    <p className=\"text-gray-400\">Sem agendamentos para mostrar.</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid gap-4\">\r\n                    {appointments.map((apt) => (\r\n                        <div key={apt.id} className=\"bg-dark p-4 rounded-xl border border-gray-800 flex flex-col md:flex-row justify-between items-center gap-4 hover:border-primary/50 transition-colors\">\r\n                            <div className=\"flex items-center gap-4 w-full md:w-auto\">\r\n                                <div className=\"p-3 bg-gray-800 rounded-full\">\r\n                                    <User className=\"w-5 h-5 text-gray-400\" />\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"font-bold text-white\">{apt.cliente?.nome || 'Cliente'}</p>\r\n                                    <p className=\"text-sm text-gray-400\">{apt.cliente?.telemovel || 'Sem contacto'}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-wrap gap-4 text-sm text-gray-300\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Clock className=\"w-4 h-4 text-primary\" />\r\n                                    <span>{new Date(apt.data_hora).toLocaleString('pt-PT')}</span>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Scissors className=\"w-4 h-4 text-primary\" />\r\n                                    <span>{apt.servico?.nome}</span>\r\n                                </div>\r\n                                <div className=\"px-2 py-1 rounded bg-green-500/20 text-green-400 font-bold text-xs uppercase border border-green-500/30\">\r\n                                    {apt.status}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BarberDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\setupAdmin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\utils\\bookingService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":55,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1860,1863],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1860,1863],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from './supabase';\r\n\r\nexport interface Service {\r\n    id: string;\r\n    name: string;\r\n    price: number;\r\n    duration: number; // in minutes\r\n}\r\n\r\nexport interface TimeSlot {\r\n    time: string;\r\n    available: boolean;\r\n}\r\n\r\nexport const services: Service[] = [\r\n    { id: '1', name: 'Corte Clássico', price: 15, duration: 30 },\r\n    { id: '2', name: 'Barba Completa', price: 12, duration: 30 },\r\n    { id: '3', name: 'Corte + Barba', price: 25, duration: 60 },\r\n    { id: '4', name: 'Acabamento', price: 8, duration: 15 },\r\n];\r\n\r\nexport interface Barber {\r\n    id: string;\r\n    name: string;\r\n    image: string;\r\n}\r\n\r\nexport const barbers: Barber[] = [\r\n    { id: '1', name: 'Carlos Silva', image: 'https://images.unsplash.com/photo-1583900985315-9c3df3027ae0?auto=format&fit=crop&q=80&w=200' },\r\n    { id: '2', name: 'Miguel Costa', image: 'https://images.unsplash.com/photo-1595152772835-219674b2a8a6?auto=format&fit=crop&q=80&w=200' },\r\n    { id: '3', name: 'Qualquer Barbeiro', image: 'https://ui-avatars.com/api/?name=Q+B&background=d4af37&color=000' }\r\n];\r\n\r\nexport const getAvailableSlots = async (): Promise<TimeSlot[]> => {\r\n    // In a real app, we would query the database for existing appointments\r\n    // const { data, error } = await supabase\r\n    //     .from('appointments')\r\n    //     .select('time')\r\n    //     .eq('date', date);\r\n\r\n    // For now, we'll simulate an async call to Supabase\r\n    await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n    const slots = [\r\n        '09:00', '09:30', '10:00', '10:30', '11:00', '11:30',\r\n        '14:00', '14:30', '15:00', '15:30', '16:00', '16:30', '17:00', '17:30', '18:00'\r\n    ];\r\n\r\n    return slots.map(time => ({\r\n        time,\r\n        available: Math.random() > 0.3 // Randomly unavailable\r\n    }));\r\n};\r\n\r\nexport const createAppointment = async (appointment: any) => {\r\n    const { data, error } = await supabase\r\n        .from('appointments')\r\n        .insert([appointment])\r\n        .select();\r\n\r\n    if (error) throw error;\r\n    return data;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\utils\\realBookingService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2628,2631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2628,2631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from './supabase';\r\nimport { addMinutes, format, isBefore, isAfter, set } from 'date-fns';\r\n\r\nexport interface TimeSlot {\r\n    time: string;\r\n    available: boolean;\r\n    barberId?: string; // If 'any' was selected, this suggests a barber who is free\r\n}\r\n\r\nconst OPENING_HOUR = 9;\r\nconst CLOSING_HOUR = 19;\r\nconst SLOT_INTERVAL = 30; // minutes\r\n\r\nexport const getRealAvailableSlots = async (\r\n    dateStr: string,\r\n    serviceDuration: number,\r\n    barberId: string | 'any'\r\n): Promise<TimeSlot[]> => {\r\n    // 1. Fetch necessary data\r\n    // If specific barber, fetch only their appointments.\r\n    // If 'any', fetch ALL appointments for that date.\r\n\r\n    // Parse date range for the query (Start of day to End of day)\r\n    const startOfDay = `${dateStr}T00:00:00`;\r\n    const endOfDay = `${dateStr}T23:59:59`;\r\n\r\n    let query = supabase\r\n        .from('agendamentos')\r\n        .select(`\r\n            id,\r\n            data_hora,\r\n            barbeiro_id,\r\n            servicos (duracao)\r\n        `)\r\n        .gte('data_hora', startOfDay)\r\n        .lte('data_hora', endOfDay)\r\n        .neq('status', 'cancelado'); // Ignore cancelled\r\n\r\n    if (barberId !== 'any') {\r\n        query = query.eq('barbeiro_id', barberId);\r\n    }\r\n\r\n    const { data: appointments, error } = await query;\r\n    if (error) {\r\n        console.error('Error fetching appointments:', error);\r\n        return [];\r\n    }\r\n\r\n    // If 'any', we also need the list of all active barbers to check them one by one\r\n    let allBarbers: string[] = [];\r\n    if (barberId === 'any') {\r\n        const { data: barbers } = await supabase\r\n            .from('barbeiros')\r\n            .select('id')\r\n            .eq('disponivel', true);\r\n        allBarbers = barbers?.map(b => b.id) || [];\r\n    } else {\r\n        allBarbers = [barberId];\r\n    }\r\n\r\n    // 2. Generate all potential slots\r\n    const slots: TimeSlot[] = [];\r\n    let currentTime = set(new Date(dateStr), { hours: OPENING_HOUR, minutes: 0, seconds: 0 });\r\n    const closeTime = set(new Date(dateStr), { hours: CLOSING_HOUR, minutes: 0, seconds: 0 });\r\n\r\n    // Helper to check overlap\r\n    const isBarberBusy = (bId: string, slotStart: Date, slotEnd: Date) => {\r\n        return appointments?.some(apt => {\r\n            if (apt.barbeiro_id !== bId) return false;\r\n\r\n            // Calculate apt start and end\r\n            const aptStart = new Date(apt.data_hora);\r\n            // Default to 30 min if service duration missing (shouldn't happen)\r\n            const serviceData = Array.isArray(apt.servicos) ? apt.servicos[0] : apt.servicos;\r\n            const duration = (serviceData as any)?.duracao || 30;\r\n            const aptEnd = addMinutes(aptStart, duration);\r\n\r\n            // Check overlap: (StartA < EndB) and (EndA > StartB)\r\n            return isBefore(slotStart, aptEnd) && isAfter(slotEnd, aptStart);\r\n        });\r\n    };\r\n\r\n    while (isBefore(currentTime, closeTime)) {\r\n        const timeLabel = format(currentTime, 'HH:mm');\r\n        const slotEnd = addMinutes(currentTime, serviceDuration);\r\n\r\n        // Check if slot exceeds closing time\r\n        if (isAfter(slotEnd, closeTime)) {\r\n            // Skip if service duration pushes past closing\r\n            currentTime = addMinutes(currentTime, SLOT_INTERVAL);\r\n            continue;\r\n        }\r\n\r\n        let isAvailable = false;\r\n        let candidateBarber: string | undefined = undefined;\r\n\r\n        // Check availability logic\r\n        // We look for ONE barber who is free for the entire duration [currentTime, slotEnd]\r\n        for (const bId of allBarbers) {\r\n            if (!isBarberBusy(bId, currentTime, slotEnd)) {\r\n                isAvailable = true;\r\n                candidateBarber = bId;\r\n                break; // Found one, that's enough to show the slot as available\r\n            }\r\n        }\r\n\r\n        slots.push({\r\n            time: timeLabel,\r\n            available: isAvailable,\r\n            barberId: candidateBarber // Keep track of who is free\r\n        });\r\n\r\n        currentTime = addMinutes(currentTime, SLOT_INTERVAL);\r\n    }\r\n\r\n    return slots;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\src\\utils\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\React12TGPSI\\Barbearia Dourado\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]